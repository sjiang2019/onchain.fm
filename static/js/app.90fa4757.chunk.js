(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{129:function(e,n){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARMAAAC3CAMAAAAGjUrGAAAAM1BMVEXExMT////BwcHo6Oju7u7Y2Nj5+fn09PTJycn8/PzPz8/GxsbU1NTMzMzl5eXp6enf3984nfntAAADJ0lEQVR4nO3cjZKaMBRAYYiIIL/v/7SLii6SEEGJeC/n60yn0+q4OcUAUYgiAAAAAAAAAAAAAAAAAAAAAAAA4OcZU1VZIFVhzNbjW84UzSkOJ0/arUe4mDnmAYtcpWdZm4o5hi7Syc9bD3MJU34hSRcl23qgS4ScSgaSrcc531feOVfl1kOdrbhvJskhkKR/gaOYabZIbz9xbYJphDY5hXuF+7uTJv9oYqOJTVGT1U7ctDQporJts6JY4xVUNDFZk1/+Nk9P5QrjMK38Jk+nycnnpykKtpP7f2sv/TiK/CajJN2/fBpFfBPHysGnu2nxTVwrB9VnryC+ydlOEjefDUZ6E3NwNElfHqZ4Ryu+iXPR7eVq0MG3BC2+SfJOkzrOPVF22aSOY18U8U3eeO/cpqDpKOKbuFasvXPsY1aejCK9SeT6sMe3Lx7sqKaiiG/iOmbzfYTXDB43EUV+E/ugrfY8u3l6pDuK/CbXvciQ7/O7ZvRYZxQFTUZRkumzHceO2xVFQ5OoHKwp1Z5jMdexjCOKiiYmK28zbVpnnnE4D++6GXn8FBVNLud0VZF1vzwbyTl1J7G3FCVNXppO0kUZLWzvpImpppNYUfbRxFQvvgD3FGUXTV4meY6yhya+ueRhEEBfE/twY06S4YGNuiamHe9F5iUZnCZpa2Lq8YTp3eM8OfTPU9bEXM99BlFmTK9WFGVN+tPBR5RFSe5ziqom5nGG3EeZPZf0EnVNzGDR4BplaRJ9TczTOkoXZXESdU3MaL2tXDiXKGwyThLH4++l7K+JleQdqpo4v16w7ybZxLLijptkS/cv+puslkRPk/knebtpUq14eaCSJituJVqauL+nRBOa0MRGExtNbDSx0cRGExtNbDSxjZo0aXq6SB+/vf/HVOHnOyuhiY0mNprY5DYJ9wOLbRKfw907SN79Cvq1xjQJJpfWxLoWP5hWTJMoC36zx5vXVyn/DvvT8jDk3LLuYnxlUhC+q8V+0ReiSEsSRcdVT4dtibDbx14YkxVtE+Z2j01b+K6M+mnhjtm2HhkAAAAAAAAAAAAAAAAAAAAAAAAAAN/0B81WMJZb1X1AAAAAAElFTkSuQmCC"},202:function(e,n,t){"use strict";t.d(n,"a",(function(){return Ce}));var r=t(12),o=t.n(r),i=t(3),a=t.n(i),s=t(268),l=t(271),c=t(267),u=t(134),d=t(82),g=t(0),f=t(117),h=t(6),j=t(4),b=t(79),p=t(14),m=t(23),y=t(189),x=t.n(y),O=t(18),S=t.n(O),w=t(37),v=t(1);function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){S()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function T(e){return Object(v.jsx)(w.a,C(C({},e),{},{style:[{color:"white"},e.style],children:e.children}))}var L=function(e){return!!/^(0x)?[0-9a-f]{40}$/i.test(e)},I=function(e){return e.endsWith(".eth")},P=function(e){var n=Math.floor(e/6e4),t=parseFloat((e%6e4/1e3).toFixed(0));return 60==t?n+1+":00":n+":"+(t<10?"0":"")+t};function Q(e){return Object(v.jsx)(x.a,{style:{backgroundColor:"rgba(255,255,255,0)"},minimumTrackTintColor:"#5c5c5c00",maximumTrackTintColor:"#5c5c5c00",thumbTintColor:"#5c5c5c",minimumValue:0,maximumValue:e.endMs,value:e.curMs,tapToSeek:!0,onSlidingStart:e.onSlidingStart,onSlidingComplete:e.onSlidingComplete})}function k(e){var n=Object(g.useState)(0),t=o()(n,2),r=t[0],i=t[1],s=Object(g.useState)(1),l=o()(s,2),c=l[0],u=l[1],d=Object(g.useState)(!1),f=o()(d,2),h=f[0],b=f[1];Object(g.useEffect)((function(){var n=e.playerState.soundStatus;if(null!=n&&!h){var t=null==n.durationMillis||isNaN(n.durationMillis)?1:n.durationMillis;i(n.positionMillis),u(t)}}),[e.playerState.soundStatus,i,u,h]);var y=e.playerState.currentLoadedSong?e.playerState.currentLoadedSong.song.collectionName+": "+e.playerState.currentLoadedSong.song.name:"~ vibing to silence ~";return Object(v.jsxs)(j.a,{style:{width:"100%"},children:[Object(v.jsx)(j.a,{style:z.sliderView,children:Object(v.jsx)(Q,{curMs:r,endMs:c,onSlidingStart:function(){return b(!0)},onSlidingComplete:function(n){var t;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.a.awrap(null==(t=e.playerState.currentLoadedSong)?void 0:t.sound.setPositionAsync(n));case 2:b(!1);case 3:case"end":return r.stop()}}),null,null,null,Promise)}})}),Object(v.jsx)(j.a,{children:Object(v.jsxs)(m.a,{onPress:function(){null!=e.playerState.currentLoadedSong&&e.onChangeIsPlayerOpen()},disabled:null==e.playerState.currentLoadedSong||e.playerState.isLoading,style:z.container,children:[Object(v.jsxs)(j.a,{style:z.view,children:[Object(v.jsx)(j.a,{style:{alignItems:"center",paddingLeft:10},children:Object(v.jsx)(T,{style:{fontSize:12},numberOfLines:1,children:P(r)})}),Object(v.jsx)(j.a,{style:{width:240,alignItems:"center"},children:Object(v.jsx)(T,{style:{fontSize:16},numberOfLines:1,ellipsizeMode:"tail",children:y})}),Object(v.jsx)(j.a,{style:{alignItems:"center",paddingRight:10},children:Object(v.jsx)(T,{style:{fontSize:12},numberOfLines:1,children:P(c-r)})})]}),Object(v.jsxs)(j.a,{style:z.controlsView,children:[Object(v.jsx)(m.a,{onPress:function(){return e.playerState.setIsLooping(!e.playerState.isLooping)},style:{paddingTop:4,paddingLeft:12,paddingRight:12},children:Object(v.jsx)(T,{style:{fontSize:"web"===p.a.OS?24:42,lineHeight:(p.a.OS,48),color:e.playerState.isLooping?"#9B59B6":"white"},children:"\u27f3"})}),Object(v.jsx)(m.a,{onPress:function(){return e.playerState.handlePlayPreviousSong()},disabled:e.playerState.isLoading,children:Object(v.jsx)(T,{style:{fontSize:48},children:"\ud83c\udf1c"})}),Object(v.jsx)(m.a,{onPress:function(){null!=e.playerState.currentLoadedSong&&e.playerState.setIsPlaying(!e.playerState.isPlaying)},disabled:null==e.playerState.currentLoadedSong,children:e.playerState.isPlaying?Object(v.jsx)(T,{style:{fontSize:48},children:"\ud83c\udf1d"}):Object(v.jsx)(T,{style:{fontSize:48},children:"\ud83c\udf1e"})}),Object(v.jsx)(m.a,{onPress:function(){return e.playerState.handlePlayNextSong()},disabled:e.playerState.isLoading,children:Object(v.jsx)(T,{style:{fontSize:48},children:"\ud83c\udf1b"})}),Object(v.jsx)(m.a,{onPress:e.handleToggleQueueView,style:{paddingLeft:12,paddingRight:12},children:Object(v.jsx)(T,{style:{fontSize:32,lineHeight:48},children:"\u2261"})})]})]})})]})}var z=h.a.create({sliderView:{marginTop:"web"===p.a.OS?-10:-20,marginLeft:10,marginRight:10},container:{width:"100%",alignItems:"center",justifyContent:"flex-end"},view:{width:"100%",flexDirection:"row",justifyContent:"space-between"},controlsView:{flexDirection:"row",justifyContent:"space-between",width:"100%",paddingTop:30,paddingLeft:"10%",paddingRight:"10%"}});function U(e){var n,t=null==(n=e.playerState.currentLoadedSong)?void 0:n.sound;return Object(g.useEffect)((function(){null!=t&&(e.playerState.isPlaying?function(e){a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==e){n.next=3;break}return n.next=3,a.a.awrap(e.playAsync());case 3:case"end":return n.stop()}}),null,null,null,Promise)}(t):function(e){a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==e){n.next=3;break}return n.next=3,a.a.awrap(e.pauseAsync());case 3:case"end":return n.stop()}}),null,null,null,Promise)}(t))}),[e.playerState.isPlaying,t]),Object(v.jsx)(j.a,{style:{width:"100%"},children:Object(v.jsx)(k,{playerState:e.playerState,onChangeIsPlayerOpen:e.onChangeIsSongInfoViewOpen,handleToggleQueueView:e.handleToggleQueueView})})}var M=t(156);function V(){var e=Object(g.useState)(!1),n=o()(e,2),t=n[0],r=n[1],i=Object(g.useState)(null),a=o()(i,2),s=a[0],l=a[1],c=Object(g.useState)(null),u=o()(c,2),d=u[0],f=u[1],h=Object(g.useState)(null),j=o()(h,2),b=j[0],p=j[1];return Object(g.useEffect)((function(){if(t&&null!=s&&null!=d){var e=M.a.show(s,{shadow:!1,backgroundColor:"white",containerStyle:{width:"100%",borderRadius:10,borderTopColor:"success"===d?"limegreen":"red",borderTopWidth:8},position:-200,animation:!0,hideOnPress:!0,textColor:"#2d2d2d"});setTimeout((function(){M.a.hide(e),r(!1)}),null!=b?b:700)}}),[t,s,d,b]),{displayToast:function(e,n,t){l(e),r(!0),f(n),null!=t&&p(t)}}}function F(e,n){return new Promise((function(t,r){u.a.Sound.createAsync({uri:e}).then(t,r),setTimeout(r,n)}))}var q=t(42),B=t.n(q);var E=t(68),R=t(129),D=t.n(R),N=t(56);function G(e){var n,t;return Object(v.jsxs)(j.a,{style:{flexDirection:"row",justifyContent:"flex-start",width:220},children:[Object(v.jsx)(j.a,{style:{marginRight:10},children:Object(v.jsx)(N.a,{defaultSource:D.a,source:{uri:e.song.imageUri},style:{height:33,width:33,borderRadius:4}})}),Object(v.jsxs)(j.a,{children:[Object(v.jsx)(T,{style:{fontSize:14},ellipsizeMode:"tail",numberOfLines:1,children:null!=(n=e.song.name)?n:"untitled"}),Object(v.jsx)(T,{style:{fontSize:14,color:"gray"},ellipsizeMode:"tail",numberOfLines:1,children:null!=(t=e.song.collectionName)?t:"unknown collection"})]})]})}function J(e){var n=V().displayToast;return Object(v.jsxs)(m.a,{style:Y.container,onPress:function(){e.isLoading||e.onChangeSong()},disabled:e.isLoading,children:[Object(v.jsx)(G,{song:e.song}),Object(v.jsxs)(j.a,{style:Y.buttons,children:[Object(v.jsx)(m.a,{onPress:function(){e.addToUserQueue(e.song),n("added to queue","success")},style:{marginRight:20},children:Object(v.jsx)(T,{style:{fontSize:24},children:"\uff0b"})}),null!=e.removeFromQueue&&Object(v.jsx)(m.a,{style:{paddingTop:"web"===p.a.OS?2:6},onPress:function(){e.removeFromQueue()},children:Object(v.jsx)(T,{style:{fontSize:20},children:"\u2715"})})]})]})}var Y=h.a.create({container:{flexDirection:"row",justifyContent:"space-between",padding:16,alignItems:"center"},buttons:{flexDirection:"row",justifyContent:"flex-end",height:"100%",alignItems:"flex-start"}});function Z(e){return Object(v.jsx)(E.a,{data:e.songs,renderItem:function(n){var t=n.item,r=n.index;return Object(v.jsx)(J,{isLoading:e.isLoading,song:t,onChangeSong:function(){return e.onChangeCurrentSong(r)},addToUserQueue:function(){return e.addToUserQueue(r)},removeFromQueue:null!=e.removeFromQueue?function(){return e.removeFromQueue(r)}:void 0})},keyExtractor:function(e,n){return e.collectionAddress+"-"+e.tokenId+"-"+n},ListFooterComponent:!0===e.hasNextPage&&e.songs.length>0?e.loadMoreButton:void 0})}var K=t(44);function X(e){var n,t,r=null==(n=e.playerState.currentLoadedSong)?void 0:n.song;return Object(v.jsx)(j.a,{style:H.container,children:Object(v.jsxs)(K.a,{style:H.safeAreaView,children:[Object(v.jsx)(m.a,{onPress:function(){return e.handleCloseQueueView()},style:{marginBottom:24,paddingLeft:16,marginTop:10},children:Object(v.jsx)(T,{style:{fontSize:24},children:"\u2715"})}),Object(v.jsx)(T,{style:{fontSize:18,paddingLeft:16},children:"now playing"}),r&&Object(v.jsx)(j.a,{style:{padding:16},children:Object(v.jsx)(G,{song:r})}),e.queueState.userQueue.length>0&&Object(v.jsxs)(j.a,{children:[Object(v.jsx)(T,{style:{fontSize:18,paddingLeft:16},children:"up next"}),Object(v.jsx)(Z,{songs:e.queueState.userQueue,onChangeCurrentSong:function(n){var t;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.queueState.userQueue[n],r.next=3,a.a.awrap(e.playerState.handleSetCurrentSong(t));case 3:r.sent&&e.queueState.removeFromUserQueue(n);case 5:case"end":return r.stop()}}),null,null,null,Promise)},addToUserQueue:function(n){return e.queueState.addToUserQueue(e.queueState.userQueue[n])},removeFromQueue:e.queueState.removeFromUserQueue,isLoading:e.playerState.isLoading})]}),null!=(null==(t=e.playerState.currentLoadedSong)?void 0:t.song)&&e.queueState.globalQueue.length>0&&Object(v.jsxs)(j.a,{children:[Object(v.jsx)(T,{style:{fontSize:18,paddingLeft:16},children:"similar"}),Object(v.jsx)(Z,{songs:e.queueState.globalQueue,onChangeCurrentSong:function(n){var t;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.queueState.globalQueue[n],r.next=3,a.a.awrap(e.playerState.handleSetCurrentSong(t));case 3:r.sent&&e.queueState.removeFromGlobalQueue(n);case 5:case"end":return r.stop()}}),null,null,null,Promise)},addToUserQueue:function(n){var t=e.queueState.globalQueue[n];e.queueState.addToUserQueue(t),e.queueState.removeFromGlobalQueue(n)},removeFromQueue:e.queueState.removeFromGlobalQueue,isLoading:e.playerState.isLoading})]})]})})}var H=h.a.create({container:{width:"100%",alignItems:"center",flex:1,height:"100%"},safeAreaView:{flex:1,width:"100%",marginTop:20}}),W=t(272),$=t(269);function _(e){var n;return Object(v.jsx)(m.a,{style:ee.container,onPress:function(){e.onChangeCollection(e.collection)},children:Object(v.jsx)(j.a,{style:ee.view,children:Object(v.jsx)(j.a,{children:Object(v.jsx)(T,{style:{fontSize:18},ellipsizeMode:"tail",numberOfLines:1,children:null!=(n=e.collection.name)?n:"untitled"})})})})}var ee=h.a.create({container:{flexDirection:"row",justifyContent:"space-between",padding:16,alignItems:"center"},view:{flexDirection:"row",justifyContent:"flex-start",width:"90%"}});function ne(e){return Object(v.jsx)(K.a,{children:Object(v.jsx)(E.a,{data:e.collections,renderItem:function(n){var t=n.item;return Object(v.jsx)(_,{collection:t,onChangeCollection:e.onChangeCollection})},keyExtractor:function(e){return e.collectionAddress}})})}function te(e){var n,t=function(e,n){var t=Object(W.a)(Object($.a)("\n    query FindCollection($collectionAddresses: [String!]!) {\n      collections(pagination: {limit: 50}, where: {collectionAddresses: $collectionAddresses}) {\n        nodes {\n          address\n          description\n          name\n        }\n      }\n    }\n"),{variables:{collectionAddresses:[e]},skip:!n}),r=t.loading,o=t.error,i=t.data;return{loading:r,error:o,data:null==i?[]:i.collections.nodes.map((function(e){return{collectionAddress:e.address,description:e.description,name:e.name}}))}}(e.submitted,null!=(n=e.submitted)&&0!==n.length&&L(n)),r=t.loading,o=t.error,i=t.data,a=function(e,n){var t=Object(W.a)(Object($.a)("\n    query Search($query: String!) {\n      search(pagination: {limit: 50}, query: {text: $query}, filter: {entityType: COLLECTION}) {\n        nodes {\n          collectionAddress\n          description\n          name\n        }\n      }\n    }\n"),{variables:{query:e},skip:!n}),r=t.loading,o=t.error,i=t.data;return{loading:r,error:o,data:null==i?[]:i.search.nodes.map((function(e){return{collectionAddress:e.collectionAddress,description:e.description,name:e.name}}))}}(e.submitted,function(e){return null!=e&&0!==e.length&&(!L(e)&&!I(e))}(e.submitted)),s=a.loading,l=a.error,c=a.data,u=i.length>0?i:c;return Object(v.jsx)(j.a,{children:r||s?Object(v.jsx)(T,{style:{fontSize:18,marginTop:20},children:"\u2740 \u2740 \u2740 searching collections \u2740 \u2740 \u2740"}):o||l?Object(v.jsxs)(T,{style:{fontSize:18,marginTop:20},children:["we encountered an error :","("]}):u&&u.length>0&&Object(v.jsxs)(j.a,{style:{width:"100%",alignItems:"center"},children:[Object(v.jsx)(T,{style:{fontSize:24,padding:8},children:"collections"}),Object(v.jsx)(ne,{collections:u,onChangeCollection:e.onChangeSelectedCollection})]})})}var re=t(88),oe=t(118),ie=t(270);function ae(e){var n;return Object(v.jsxs)(j.a,{style:ce.container,children:[Object(v.jsxs)(j.a,{style:[ce.searchInputBackground,{width:null!=e.submitted?"85%":"100%"}],children:[Object(v.jsxs)(j.a,{style:{width:"100%",flexDirection:"row",flex:1},children:[Object(v.jsx)(ie.a,{name:"search",size:20,color:"black",style:{marginLeft:6}}),Object(v.jsx)(oe.a,{style:ce.textInput,autoCorrect:!1,autoComplete:"off",autoCapitalize:"none",placeholder:e.placeholderText,returnKeyType:"search",onSubmitEditing:function(){return e.onChangeSubmittedText(e.text)},value:null!=(n=e.text)?n:"",onChangeText:e.onChangeText})]}),null!=e.text&&e.text.length>0&&Object(v.jsx)(m.a,{onPress:function(){return e.onChangeText(null)},style:{paddingRight:6,paddingLeft:6},children:Object(v.jsx)(T,{style:{fontSize:18},children:"\u2715"})})]}),null!=e.submitted&&Object(v.jsx)(m.a,{onPress:function(){e.onChangeText(null),e.onChangeSubmittedText(null),re.a.dismiss()},style:ce.cancelButton,children:Object(v.jsx)(T,{style:{padding:8},children:"Cancel"})})]})}var se,le,ce=h.a.create({container:{margin:15,alignItems:"center",flexDirection:"row"},searchInputBackground:{padding:10,flexDirection:"row",backgroundColor:"#5c5c5c",borderRadius:15,alignItems:"center"},textInput:{fontSize:20,marginLeft:10,flex:1,color:"white"},cancelButton:{marginLeft:12,borderWidth:1,borderColor:"white",borderRadius:6}}),ue=t(154),de=t.n(ue),ge=Object($.a)(se||(se=de()(["\n  fragment TokenFragment on Token {\n    collectionAddress\n    tokenId\n    name\n    collectionName\n    owner\n    description\n    content {\n      mediaEncoding {\n        ... on AudioEncodingTypes {\n          original\n        }\n      }\n    }\n    image {\n      mediaEncoding {\n        ... on ImageEncodingTypes {\n          thumbnail\n        }\n      }\n    }\n    metadata\n  }\n"]))),fe=Object($.a)(le||(le=de()(["\n  query MusicNFTs(\n    $collectionAddresses: [String!]\n    $ownerAddresses: [String!]\n    $sort: TokenSortInput\n    $limit: Int!\n  ) {\n    tokens(\n      pagination: { limit: $limit }\n      sort: $sort\n      where: {\n        collectionAddresses: $collectionAddresses\n        ownerAddresses: $ownerAddresses\n      }\n      filter: { mediaType: AUDIO }\n    ) {\n      nodes {\n        token {\n          ...TokenFragment\n        }\n      }\n    }\n  }\n  ","\n"])),ge);function he(e,n,t,r){var o=null==e?void 0:[e.collectionAddress],i=null==n?void 0:[n],a=Object(W.a)(fe,{variables:{collectionAddresses:o,ownerAddresses:i,limit:null!=r?r:500,sort:t},skip:null==e&&null==n}),s=a.loading,l=a.error,c=a.data;return{loading:s,error:l,data:null==c?[]:c.tokens.nodes.map((function(e){var n=e.token;return{collectionAddress:n.collectionAddress,tokenId:n.tokenId,name:n.name,collectionName:n.collectionName,owner:n.owner,description:n.description,audioUri:n.content.mediaEncoding.original,imageUri:n.image.mediaEncoding.thumbnail,metadata:n.metadata}}))}}function je(e){var n=Object(g.useState)([]),t=o()(n,2),r=t[0],i=t[1];return Object(g.useEffect)((function(){i(e.songs.slice(0,e.offset+10))}),[e.offset,e.songs]),Object(v.jsx)(Z,{onChangeCurrentSong:function(n){return e.onChangeCurrentSong(r[n])},addToUserQueue:function(n){return e.addToUserQueue(r[n])},isLoading:e.isLoading,loadMoreButton:Object(v.jsx)(m.a,{style:be.loadMoreButton,onPress:function(){return e.setOffset((function(e){return e+10}))},children:Object(v.jsx)(T,{style:be.loadMoreText,children:"load more"})}),hasNextPage:e.songs.length>r.length,songs:r})}var be=h.a.create({loadMoreButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:20},loadMoreText:{fontSize:16,padding:8,borderWidth:1,borderColor:"white",borderRadius:6}});function pe(e){var n=he(e.collection,e.ownerAddress),t=n.loading,r=n.error,o=n.data,i=null==e.ownerAddress?"\u2740 \u2740 \u2740 searching music \u2740 \u2740 \u2740":"\u2740 \u2740 \u2740 searching owners \u2740 \u2740 \u2740",s=null==e.ownerAddress?"no music found :(":"no music owned by "+e.ownerAddress;return Object(v.jsx)(K.a,{style:{flex:1,width:"100%"},children:t?Object(v.jsx)(j.a,{style:{width:"100%",alignItems:"center"},children:Object(v.jsx)(T,{style:{fontSize:18,marginTop:20},children:i})}):r?Object(v.jsx)(j.a,{style:{width:"100%",alignItems:"center"},children:Object(v.jsxs)(T,{style:{fontSize:18,marginTop:20},children:["we encountered an error :","("]})}):o.length>0?Object(v.jsx)(je,{songs:o,onChangeCurrentSong:function(n){var t,r,i,s,l,c;return a.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.a.awrap(e.onChangeSelectedSong(n));case 2:if(u.sent&&o.length>0){if(t=o.indexOf(n)+1,r=o.slice(t,t+25),i=[],s=Math.min(25-r.length,t-1),25>r.length)for(l=0;l<s;l++)c=o[l],r.includes(c)||i.push(c);e.handleChangeGlobalQueue([].concat(B()(r),i))}case 4:case"end":return u.stop()}}),null,null,null,Promise)},addToUserQueue:e.addToUserQueue,isLoading:e.isLoading,offset:e.offset,setOffset:e.setOffset}):Object(v.jsx)(j.a,{style:{width:"100%",alignItems:"center"},children:Object(v.jsx)(T,{style:{fontSize:16,marginTop:20},children:s})})})}function me(e){var n=he({collectionAddress:"0xabEFBc9fD2F806065b4f3C237d4b59D9A97Bcac7"},void 0,{sortKey:"MINTED",sortDirection:"DESC"},10),t=n.loading,r=n.error,o=n.data,i=t||r?[]:o;return Object(v.jsxs)(j.a,{style:{width:"100%",flex:1},children:[Object(v.jsx)(j.a,{style:{width:"100%",alignItems:"center"},children:Object(v.jsxs)(j.a,{style:{width:"80%",alignItems:"center",marginTop:18},children:[Object(v.jsx)(T,{style:{fontSize:24,marginBottom:18},children:"welcome to onchain.fm"}),Object(v.jsxs)(j.a,{style:{alignItems:"flex-start"},children:[Object(v.jsx)(T,{style:{fontSize:16,marginBottom:12},children:"\u2740 search for a collection by name or address"}),Object(v.jsx)(T,{style:{fontSize:16,marginBottom:12},children:"\u2740 search for an owner by ens or address"}),Object(v.jsx)(T,{style:{fontSize:16},children:"\u2740 note: if a song doesn't play, try again later"})]})]})}),Object(v.jsxs)(K.a,{style:ye.safeAreaView,children:[Object(v.jsx)(j.a,{style:{width:"100%",alignItems:"center"},children:Object(v.jsx)(T,{style:{fontSize:18,padding:8},children:"recently minted on zora"})}),Object(v.jsx)(Z,{songs:i,onChangeCurrentSong:function(n){return e.onChangeCurrentSong(i[n])},addToUserQueue:function(n){return e.addToUserQueue(i[n])},isLoading:e.isLoading})]})]})}var ye=h.a.create({safeAreaView:{flex:1,marginTop:32,width:"100%"}});function xe(e){var n=e.searchState,t=n.query,r=n.onChangeQuery,o=n.submitted,i=n.onChangeSubmitted,a=n.selectedCollection,s=n.setSelectedCollection,l=n.offset,c=n.setOffset,u=function(e,n){return null!=e&&0!==e.length&&(null==n&&(I(e)||L(e)))}(o,a)?o:void 0;return Object(v.jsxs)(j.a,{style:Oe.container,children:[Object(v.jsx)(j.a,{style:Oe.searchInputContainer,children:Object(v.jsx)(j.a,{style:{width:"100%"},children:Object(v.jsx)(ae,{text:t,submitted:o,onChangeText:r,onChangeSubmittedText:i})})}),Object(v.jsxs)(j.a,{style:Oe.fetcherContainer,children:[null==o&&Object(v.jsx)(me,{onChangeCurrentSong:e.playerState.handleSetCurrentSong,addToUserQueue:e.queueState.addToUserQueue,isLoading:e.playerState.isLoading}),null==a&&null!=o&&Object(v.jsx)(te,{submitted:o,onChangeSelectedCollection:s}),(null!=a||null!=u)&&null!=o&&Object(v.jsx)(pe,{collection:null!=a?a:void 0,ownerAddress:null!=u?u:void 0,onChangeSelectedSong:e.playerState.handleSetCurrentSong,addToUserQueue:e.queueState.addToUserQueue,handleChangeGlobalQueue:e.queueState.setGlobalQueue,isLoading:e.playerState.isLoading,offset:l,setOffset:c})]})]})}var Oe=h.a.create({container:{width:"100%",alignItems:"center",flex:1,height:"100%",marginTop:20},searchInputContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",width:"80%"},fetcherContainer:{flex:1,width:"100%",alignItems:"center"}}),Se=t(47);function we(e){var n=e.song,t=Object(g.useState)(!1),r=o()(t,2),i=r[0],a=r[1];return Object(v.jsx)(j.a,{style:ve.container,children:Object(v.jsxs)(K.a,{style:ve.safeAreaView,children:[Object(v.jsx)(m.a,{onPress:function(){return e.handleCloseSongInfoView()},style:{marginBottom:24,paddingLeft:16,marginTop:10},children:Object(v.jsx)(T,{style:{fontSize:24},children:"\u2715"})}),Object(v.jsxs)(Se.a,{style:{paddingLeft:16,paddingRight:16},children:[Object(v.jsxs)(j.a,{style:ve.header,children:[Object(v.jsx)(T,{style:{fontSize:24,marginBottom:24},children:n.name}),Object(v.jsx)(N.a,{defaultSource:D.a,source:{uri:null==n?void 0:n.imageUri},style:{width:256,height:256,borderRadius:10}})]}),Object(v.jsxs)(T,{style:{fontSize:18},children:[n.collectionName," #",n.tokenId]}),Object(v.jsx)(T,{style:{marginBottom:12},children:n.collectionAddress}),Object(v.jsxs)(T,{style:{marginBottom:12},children:["Owner: ",n.owner]}),Object(v.jsx)(T,{style:{marginBottom:20},children:n.description}),Object(v.jsxs)(j.a,{style:{width:"100%",alignItems:"center",justifyContent:"center"},children:[Object(v.jsx)(m.a,{style:ve.showMetadataButton,onPress:function(){return a(!i)},children:Object(v.jsx)(T,{style:ve.showMetadataText,children:i?"hide raw metadata":"show raw metadata"})}),i&&Object(v.jsx)(T,{style:{marginBottom:24},children:JSON.stringify(n.metadata,null,2)})]})]})]})})}var ve=h.a.create({container:{width:"100%",alignItems:"center",flex:1,height:"100%"},safeAreaView:{flex:1,width:"100%"},header:{width:"100%",alignItems:"center",marginBottom:20},showMetadataButton:{width:"80%",maxWidth:256,alignItems:"center",marginBottom:36,borderWidth:1,borderRadius:10,borderColor:"white"},showMetadataText:{fontSize:18,lineHeight:18,paddingTop:16,paddingBottom:16}}),Ae=new s.a({uri:"https://api.zora.co/graphql",cache:new l.a});function Ce(){var e=function(){var e=Object(g.useState)([]),n=o()(e,2),t=n[0],r=n[1],i=Object(g.useState)([]),a=o()(i,2),s=a[0],l=a[1],c=Object(g.useState)([]),u=o()(c,2),d=u[0],f=u[1];return{history:t,addToHistory:function(e){r((function(n){return[].concat(B()(n),[e])}))},popFromHistory:function(){if(t.length>0){var e=t[t.length-1];if(null!=e)return r((function(e){return B()(e.slice(0,-1))})),e}return null},userQueue:s,addToUserQueue:function(e){l((function(n){return[].concat(B()(n),[e])}))},removeFromUserQueue:function(e){l((function(n){return n.filter((function(n,t){return t!=e}))}))},popFromUserQueue:function(){if(s.length>0){var e=s[0];return l((function(e){return B()(e.slice(1))})),e}return null},globalQueue:d,setGlobalQueue:f,removeFromGlobalQueue:function(e){f((function(n){return n.filter((function(n,t){return t!=e}))}))},popFromGlobalQueue:function(){if(d.length>0){var e=d[0];return f((function(e){return B()(e.slice(1))})),e}return null}}}(),n=function(e){var n=V().displayToast,t=Object(g.useState)(null),r=o()(t,2),i=r[0],s=r[1],l=Object(g.useState)(!1),c=o()(l,2),u=c[0],d=c[1],f=Object(g.useState)(null),h=o()(f,2),j=h[0],b=h[1],p=Object(g.useState)(!1),m=o()(p,2),y=m[0],x=m[1],O=Object(g.useState)(!1),S=o()(O,2),w=S[0],v=S[1],A=Object(g.useState)(!1),C=o()(A,2),T=C[0],L=C[1],I=function(e){var t,r,o;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(t=!1,null==e||null==e.audioUri||T){i.next=17;break}return i.prev=2,L(!0),i.next=6,a.a.awrap(F(e.audioUri,3e3));case 6:r=i.sent,null!=(o=r.sound)&&(s({song:e,sound:o}),t=!0,d(!0),o.setOnPlaybackStatusUpdate((function(e){b(e),!0===e.didJustFinish&&x(!0)}))),i.next=14;break;case 11:i.prev=11,i.t0=i.catch(2),n("audio encoding for "+e.name+" in progress","error",2e3);case 14:return i.prev=14,L(!1),i.finish(14);case 17:return i.abrupt("return",t);case 18:case"end":return i.stop()}}),null,null,[[2,11,14,17]],Promise)},P=function(){var n;null!=i&&e.addToHistory(i.song);var t=null!=(n=e.popFromUserQueue())?n:e.popFromGlobalQueue();null!=t&&I(t)},Q=function(){null!=i&&I(i.song)};return Object(g.useEffect)((function(){y&&(w?Q():P(),x(!1))}),[y,x]),Object(g.useEffect)((function(){if(null!=(null==i?void 0:i.sound))return function(){i.sound.unloadAsync()}}),[null==i?void 0:i.sound]),{handlePlayPreviousSong:function(){var n,t;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=function(){var n=e.popFromHistory();null!=n?I(n):Q()},null==i){r.next=9;break}return r.next=4,a.a.awrap(i.sound.getStatusAsync());case 4:if(t=r.sent,!(t.positionMillis>2500)){r.next=9;break}return Q(),r.abrupt("return");case 9:n();case 10:case"end":return r.stop()}}),null,null,null,Promise)},handlePlayNextSong:P,currentLoadedSong:i,handleSetCurrentSong:I,isPlaying:u,setIsPlaying:d,soundStatus:j,isLooping:w,setIsLooping:v,isLoading:T}}(e),t=Object(g.useState)(!1),r=o()(t,2),i=r[0],s=r[1],l=Object(g.useState)(!1),h=o()(l,2),p=h[0],m=h[1],y=Object(g.useState)(!1),x=o()(y,2),O=x[0],S=x[1],w=function(){var e=Object(g.useState)(null),n=o()(e,2),t=n[0],r=n[1],i=Object(g.useState)(null),a=o()(i,2),s=a[0],l=a[1],c=Object(g.useState)(0),u=o()(c,2),d=u[0],f=u[1],h=Object(g.useState)(null),j=o()(h,2),b=j[0],p=j[1];return{query:t,onChangeQuery:function(e){return r(e)},submitted:s,onChangeSubmitted:function(e){p(null),f(0),l(null!=e?e.toLowerCase().trim():null)},selectedCollection:b,setSelectedCollection:p,offset:d,setOffset:f}}();return Object(g.useEffect)((function(){O||(a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(u.a.setAudioModeAsync({staysActiveInBackground:!0,interruptionModeIOS:d.b.DoNotMix,allowsRecordingIOS:!1,playsInSilentModeIOS:!0}));case 2:case"end":return e.stop()}}),null,null,null,Promise),S(!0))})),Object(v.jsx)(b.a,{children:Object(v.jsx)(c.a,{client:Ae,children:Object(v.jsxs)(j.a,{style:Te.container,children:[Object(v.jsx)(f.a,{}),Object(v.jsxs)(j.a,{style:Te.screen,children:[Object(v.jsxs)(j.a,{style:{width:"100%",alignItems:"center",flex:1},children:[p&&null!=n.currentLoadedSong&&Object(v.jsx)(we,{song:n.currentLoadedSong.song,handleCloseSongInfoView:function(){return m(!1)}}),i&&Object(v.jsx)(X,{queueState:e,playerState:n,handleCloseQueueView:function(){return s(!1)}}),!p&&!i&&Object(v.jsx)(xe,{searchState:w,playerState:n,queueState:e})]}),Object(v.jsx)(j.a,{style:Te.player,children:Object(v.jsx)(U,{playerState:n,onChangeIsSongInfoViewOpen:function(){m(!p),s(!1)},handleToggleQueueView:function(){i?s(!1):(s(!0),m(!1))}})})]})]})})})}var Te=h.a.create({container:{backgroundColor:"#2d2d2d",alignItems:"center",flex:1},screen:{width:"100%",alignItems:"center",flex:1,marginTop:20},player:{width:"100%",alignItems:"center",height:200,shadowColor:"#171717",shadowOffset:{width:0,height:-2},borderTopWidth:.5,borderLeftWidth:.5,borderRightWidth:.5,borderTopLeftRadius:10,borderTopRightRadius:10,shadowOpacity:.1,shadowRadius:3,backgroundColor:"black"}})},211:function(e,n,t){e.exports=t(253)}},[[211,1,2]]]);
//# sourceMappingURL=app.90fa4757.chunk.js.map