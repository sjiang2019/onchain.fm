{"version":3,"sources":["assets/image-loading.png","components/Text.tsx","utils.ts","components/PlayerControls.tsx","components/Player.tsx","hooks/useToast.tsx","hooks/useQueue.tsx","components/SongDisplay.tsx","components/SongListItem.tsx","components/SongListing.tsx","views/QueueView.tsx","components/CollectionListItem.tsx","components/CollectionListing.tsx","components/CollectionFetcher.tsx","hooks/useFetchCollectionsByAddress.tsx","hooks/useFetchCollectionsByName.tsx","components/SearchInput.tsx","hooks/useFetchMusicNfts.tsx","components/SongPaginator.tsx","components/SongFetcher.tsx","components/WelcomeMessage.tsx","views/SearchView.tsx","views/SongInfoView.tsx","App.tsx","hooks/useSearch.ts"],"names":["module","exports","Text","props","style","color","children","isAddressLike","maybeAddress","test","isEnsLike","maybeEns","endsWith","formatMs","millis","minutes","Math","floor","seconds","parseFloat","toFixed","TrackSlider","backgroundColor","minimumTrackTintColor","maximumTrackTintColor","thumbTintColor","minimumValue","maximumValue","endMs","value","curMs","tapToSeek","onSlidingStart","onSlidingComplete","PlayerControls","useState","setCurMs","setEndMs","isSliding","setIsSliding","useEffect","status","queueState","soundStatus","duration","durationMillis","isNaN","positionMillis","nowPlaying","currentLoadedSong","song","collectionName","name","View","width","styles","sliderView","a","async","sound","setPositionAsync","TouchableOpacity","onPress","onChangeIsPlayerOpen","disabled","isLoading","container","view","alignItems","paddingLeft","fontSize","numberOfLines","ellipsizeMode","paddingRight","controlsView","setIsLooping","isLooping","paddingTop","Platform","OS","lineHeight","handlePlayPreviousSong","setIsPlaying","isPlaying","handlePlayNextSong","handleToggleQueueView","StyleSheet","create","marginTop","marginLeft","marginRight","justifyContent","flexDirection","Player","playAsync","playSound","pauseAsync","pauseSong","onChangeIsSongInfoViewOpen","useToast","showToast","setShowToast","message","setMessage","toastType","setToastType","setDuration","toast","Toast","show","shadow","containerStyle","borderRadius","borderTopColor","borderTopWidth","position","animation","hideOnPress","textColor","setTimeout","hide","displayToast","toastMessage","durationMs","fetchSoundWithTimeout","audioUri","timeoutMs","Promise","resolve","reject","Audio","Sound","createAsync","uri","then","useQueue","history","setHistory","userQueue","setUserQueue","globalQueue","setGlobalQueue","setCurrentLoadedSong","setSoundStatus","songJustFinished","setSongJustFinished","setIsLoading","addToHistory","curHistory","handleSetCurrentSong","didSuccessfullySetSong","setOnPlaybackStatusUpdate","didJustFinish","length","curUserQueue","slice","curGlobalQueue","unloadAsync","addToUserQueue","removeFromUserQueue","filter","s","removeFromGlobalQueue","SongDisplay","Image","defaultSource","imageLoading","source","imageUri","height","SongListItem","onChangeSong","buttons","removeFromQueue","padding","SongListing","FlatList","data","songs","renderItem","item","onChangeCurrentSong","keyExtractor","idx","collectionAddress","tokenId","ListFooterComponent","hasNextPage","loadMoreButton","undefined","QueueView","SafeAreaView","safeAreaView","handleCloseQueueView","marginBottom","flex","CollectionListItem","onChangeCollection","collection","CollectionListing","collections","CollectionFetcher","query","shouldPerformQuery","useQuery","gql","variables","collectionAddresses","skip","loading","error","nodes","map","res","address","description","useFetchCollectionsByAddress","submitted","queriedCollectionsLoading","queriedCollectionsError","queriedCollections","search","useFetchCollectionsByName","shouldSearchCollectionsByName","searchedCollectionsLoading","searchedCollectionsError","searchedCollections","onChangeSelectedCollection","SearchInput","clicked","setClicked","searchInputBackground","Feather","size","TextInput","textInput","autoCorrect","autoComplete","autoCapitalize","placeholder","placeholderText","returnKeyType","onSubmitEditing","onChangeSubmittedText","text","onChangeText","onFocus","Keyboard","dismiss","cancelButton","margin","borderWidth","borderColor","TokenFragment","MusicNFTSearchQuery","useFetchMusicNfts","ownerAddress","sort","limit","ownerAddresses","tokens","token","owner","content","mediaEncoding","original","image","thumbnail","metadata","SongPaginator","currentPage","setCurrentPage","offset","setOffset","curOffset","loadMoreText","SongFetcher","musicNfts","onChangeSelectedSong","startIdx","indexOf","nextSongs","prevSongs","endIdx","min","i","includes","push","handleChangeGlobalQueue","WelcomeMessage","sortKey","sortDirection","SearchView","searchState","onChangeQuery","onChangeSubmitted","selectedCollection","setSelectedCollection","shouldQueryByOwner","searchInputContainer","fetcherContainer","SongInfoView","showMetadata","setShowMetadata","ScrollView","header","showMetadataButton","showMetadataText","JSON","stringify","maxWidth","paddingBottom","client","ApolloClient","cache","InMemoryCache","App","isQueueViewOpen","setIsQueueViewOpen","isSongInfoViewOpen","setIsSongInfoViewOpen","hasSetAudioMode","setHasSetAudioMode","setQuery","setSubmitted","toLowerCase","trim","useSearch","setAudioModeAsync","staysActiveInBackground","interruptionModeIOS","InterruptionModeIOS","DoNotMix","allowsRecordingIOS","playsInSilentModeIOS","ApolloProvider","StatusBar","screen","player","shadowColor","shadowOffset","borderLeftWidth","borderRightWidth","borderTopLeftRadius","borderTopRightRadius","shadowOpacity","shadowRadius"],"mappings":"uEAAAA,EAAOC,QAAU,8uC,8zBCEF,SAASC,EAAKC,GAC3B,OACE,cAAC,IAAD,OAAqBA,GAArB,IAA4BC,MAAO,CAAC,CAAEC,MAAO,SAAWF,EAAMC,OAA9D,SACGD,EAAMG,YCLN,IAIMC,EAAgB,SAACC,GAC5B,QAAK,uBAAuBC,KAAKD,IAOtBE,EAAY,SAACC,GACxB,OAAOA,EAASC,SAAS,SAGdC,EAAW,SAACC,GACvB,IAAMC,EAAUC,KAAKC,MAAMH,EAAS,KAC9BI,EAAUC,YAAaL,EAAS,IAAS,KAAMM,QAAQ,IAC7D,OAAkB,IAAXF,EACHH,EAAU,EAAI,MACdA,EAAU,KAAOG,EAAU,GAAK,IAAM,IAAMA,GCblD,SAASG,EAAYlB,GAMnB,OACE,cAAC,IAAD,CACEC,MAAO,CAAEkB,gBAAiB,uBAC1BC,sBAAsB,YACtBC,sBAAsB,YACtBC,eAAe,UACfC,aAAc,EACdC,aAAcxB,EAAMyB,MACpBC,MAAO1B,EAAM2B,MACbC,WAAW,EACXC,eAAgB7B,EAAM6B,eACtBC,kBAAmB9B,EAAM8B,oBAWhB,SAASC,EAAe/B,GACrC,MAA0BgC,mBAAS,GAAnC,WAAOL,EAAP,KAAcM,EAAd,KACA,EAA0BD,mBAAS,GAAnC,WAAOP,EAAP,KAAcS,EAAd,KACA,EAAkCF,oBAAS,GAA3C,WAAOG,EAAP,KAAkBC,EAAlB,KAEAC,qBAAU,WACR,IAAMC,EAAStC,EAAMuC,WAAWC,YAChC,GAAc,MAAVF,IAAmBH,EAAW,CAChC,IAAMM,EACqB,MAAzBH,EAAOI,gBAA2BC,MAAML,EAAOI,gBAE3C,EADAJ,EAAOI,eAEbT,EAASK,EAAOM,gBAChBV,EAASO,MAEV,CAACzC,EAAMuC,WAAWC,YAAaP,EAAUC,EAAUC,IAEtD,IAAMU,EAAa7C,EAAMuC,WAAWO,kBAC7B9C,EAAMuC,WAAWO,kBAAkBC,KAAKC,eAD5B,KAC+ChD,EAAMuC,WAAWO,kBAAkBC,KAAKE,KACtG,wBACJ,OACE,eAACC,EAAA,EAAD,CAAMjD,MAAO,CAAEkD,MAAO,QAAtB,UACE,cAACD,EAAA,EAAD,CAAMjD,MAAOmD,EAAOC,WAApB,SACE,cAACnC,EAAD,CACES,MAAOA,EACPF,MAAOA,EACPI,eAAgB,kBAAMO,GAAa,IACnCN,kBAAmB,SAAOJ,GAAP,eAAA4B,EAAAC,OAAA,kEAAAD,EAAA,eACXtD,EAAMuC,WAAWO,wBADN,EACX,EAAoCU,MAAMC,iBAC9C/B,IAFe,OAIjBU,GAAa,GAJI,iEAQvB,cAACc,EAAA,EAAD,UACE,eAACQ,EAAA,EAAD,CACEC,QAAS,WACmC,MAAtC3D,EAAMuC,WAAWO,mBACnB9C,EAAM4D,wBAGVC,SACwC,MAAtC7D,EAAMuC,WAAWO,mBACjB9C,EAAMuC,WAAWuB,UAEnB7D,MAAOmD,EAAOW,UAVhB,UAYE,eAACb,EAAA,EAAD,CAAMjD,MAAOmD,EAAOY,KAApB,UACE,cAACd,EAAA,EAAD,CAAMjD,MAAO,CAAEgE,WAAY,SAAUC,YAAa,IAAlD,SACE,cAAC,EAAD,CAAMjE,MAAO,CAAEkE,SAAU,IAAMC,cAAe,EAA9C,SACG1D,EAASiB,OAGd,cAACuB,EAAA,EAAD,CAAMjD,MAAO,CAAEkD,MAAO,IAAKc,WAAY,UAAvC,SACE,cAAC,EAAD,CACEhE,MAAO,CAAEkE,SAAU,IACnBC,cAAe,EACfC,cAAc,OAHhB,SAKGxB,MAGL,cAACK,EAAA,EAAD,CAAMjD,MAAO,CAAEgE,WAAY,SAAUK,aAAc,IAAnD,SACE,cAAC,EAAD,CAAMrE,MAAO,CAAEkE,SAAU,IAAMC,cAAe,EAA9C,SACG1D,EAASe,EAAQE,UAIxB,eAACuB,EAAA,EAAD,CAAMjD,MAAOmD,EAAOmB,aAApB,UACE,cAACb,EAAA,EAAD,CACEC,QAAS,kBACP3D,EAAMuC,WAAWiC,cAAcxE,EAAMuC,WAAWkC,YAElDxE,MAAO,CAAEyE,WAAY,GAJvB,SAME,cAAC,EAAD,CACEzE,MAAO,CACLkE,SAA0B,QAAhBQ,IAASC,GAAe,GAAK,GACvCC,YAAYF,IAASC,GAAe,IACpC1E,MAAOF,EAAMuC,WAAWkC,UAAY,UAAY,SAJpD,sBAUF,cAACf,EAAA,EAAD,CACEC,QAAS,kBAAM3D,EAAMuC,WAAWuC,0BAChCjB,SAAU7D,EAAMuC,WAAWuB,UAF7B,SAIE,cAAC,EAAD,CAAM7D,MAAO,CAAEkE,SAAU,IAAzB,4BAEF,cAACT,EAAA,EAAD,CACEC,QAAS,WACmC,MAAtC3D,EAAMuC,WAAWO,mBACnB9C,EAAMuC,WAAWwC,cAAc/E,EAAMuC,WAAWyC,YAGpDnB,SAAgD,MAAtC7D,EAAMuC,WAAWO,kBAN7B,SAQG9C,EAAMuC,WAAWyC,UAChB,cAAC,EAAD,CAAM/E,MAAO,CAAEkE,SAAU,IAAzB,0BAEA,cAAC,EAAD,CAAMlE,MAAO,CAAEkE,SAAU,IAAzB,4BAGJ,cAACT,EAAA,EAAD,CACEC,QAAS,kBAAM3D,EAAMuC,WAAW0C,sBAChCpB,SAAU7D,EAAMuC,WAAWuB,UAF7B,SAIE,cAAC,EAAD,CAAM7D,MAAO,CAAEkE,SAAU,IAAzB,4BAEF,cAACT,EAAA,EAAD,CAAkBC,QAAS3D,EAAMkF,sBAAjC,SACE,cAAC,EAAD,CACEjF,MAAO,CACLkE,SAAU,GACVU,WAAY,IAHhB,iCAgBd,IAAMzB,EAAS+B,IAAWC,OAAO,CAC/B/B,WAAY,CACVgC,UAA2B,QAAhBV,IAASC,IAAgB,IAAM,GAC1CU,WAAY,GACZC,YAAa,IAEfxB,UAAW,CACTZ,MAAO,OACPc,WAAY,SACZuB,eAAgB,YAElBxB,KAAM,CACJb,MAAO,OACPsC,cAAe,MACfD,eAAgB,iBAElBjB,aAAc,CACZkB,cAAe,MACfD,eAAgB,gBAChBrC,MAAO,OACPuB,WAAY,GACZR,YAAa,MACbI,aAAc,SCnKH,SAASoB,EAAO1F,GAAkC,IAAD,EACxDwD,EAAK,SAAGxD,EAAMuC,WAAWO,wBAApB,EAAG,EAAoCU,MAWlD,OATAnB,qBAAU,WACK,MAATmB,IACExD,EAAMuC,WAAWyC,UAvBT,SAAOxB,GAAP,EAAAF,EAAAC,OAAA,mDACH,MAATC,EADY,kCAAAF,EAAA,MAERE,EAAMmC,aAFE,4DAwBVC,CAAUpC,GAlBA,SAAOA,GAAP,EAAAF,EAAAC,OAAA,mDACH,MAATC,EADY,kCAAAF,EAAA,MAERE,EAAMqC,cAFE,4DAoBVC,CAAUtC,MAGb,CAACxD,EAAMuC,WAAWyC,UAAWxB,IAE9B,cAACN,EAAA,EAAD,CACEjD,MAAO,CACLkD,MAAO,QAFX,SAKE,cAACpB,EAAD,CACEQ,WAAYvC,EAAMuC,WAClBqB,qBAAsB5D,EAAM+F,2BAC5Bb,sBAAuBlF,EAAMkF,0B,8BCpC9B,SAASc,IACd,MAAkChE,oBAAS,GAA3C,WAAOiE,EAAP,KAAkBC,EAAlB,KACA,EAA8BlE,mBAAwB,MAAtD,WAAOmE,EAAP,KAAgBC,EAAhB,KACA,EAAkCpE,mBAA2B,MAA7D,WAAOqE,EAAP,KAAkBC,EAAlB,KACA,EAAgCtE,mBAAwB,MAAxD,WAAOS,EAAP,KAAiB8D,EAAjB,KAuCA,OAxBAlE,qBAAU,WACR,GAAI4D,GAAwB,MAAXE,GAAgC,MAAbE,EAAmB,CACrD,IAAIG,EAAQC,IAAMC,KAAKP,EAAS,CAC9BQ,QAAQ,EACRxF,gBAAiB,QACjByF,eAAgB,CACdzD,MAAO,OACP0D,aAAc,GACdC,eAA8B,YAAdT,EAA0B,YAAc,MACxDU,eAAgB,GAElBC,UAAW,IACXC,WAAW,EACXC,aAAa,EACbC,UAAW,YAGbC,YAAW,WACTX,IAAMY,KAAKb,GACXN,GAAa,KAFL,MAGPzD,IAAY,QAEhB,CAACwD,EAAWE,EAASE,EAAW5D,IAE5B,CACL6E,aAtCmB,SACnBC,EACAlB,EACAmB,GAEApB,EAAWmB,GACXrB,GAAa,GACbI,EAAaD,GACK,MAAdmB,GACFjB,EAAYiB,KCOlB,SAASC,EACPC,EACAC,GAEA,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GACpCC,IAAMC,MAAMC,YAAY,CACtBC,IAAKR,IACJS,KAAKN,EAASC,GACjBV,WAAWU,EAAQH,MAIhB,SAASS,IACd,IAAQd,EAAiBtB,IAAjBsB,aACR,EAA8BtF,mBAAuB,IAArD,WAAOqG,EAAP,KAAgBC,EAAhB,KACA,EAAkCtG,mBAAuB,IAAzD,WAAOuG,EAAP,KAAkBC,EAAlB,KACA,EAAsCxG,mBAAuB,IAA7D,WAAOyG,EAAP,KAAoBC,EAApB,KACA,EAAkD1G,mBAChD,MADF,WAAOc,EAAP,KAA0B6F,EAA1B,KAGA,EAAkC3G,oBAAS,GAA3C,WAAOgD,EAAP,KAAkBD,EAAlB,KACA,EAAsC/C,mBAAkC,MAAxE,WAAOQ,EAAP,KAAoBoG,EAApB,KACA,EAAgD5G,oBAAS,GAAzD,WAAO6G,EAAP,KAAyBC,EAAzB,KACA,EAAkC9G,oBAAS,GAA3C,WAAOyC,EAAP,KAAkBD,EAAlB,KACA,EAAkCxC,oBAAS,GAA3C,WAAO8B,EAAP,KAAkBiF,EAAlB,KAGMC,EAAe,SAACjG,GACpBuF,GAAW,SAACW,GAAD,oBAAkCA,GAAlC,CAA8ClG,QAerDmG,EAAuB,SAAOnG,GAAP,mBAAAO,EAAAC,OAAA,mDACvB4F,GAAyB,EAEjB,MAARpG,GAAiC,MAAjBA,EAAK2E,UAAqB5D,EAHnB,iCAKvBiF,GAAa,GALU,WAAAzF,EAAA,MAMCmE,EAAsB1E,EAAK2E,SAAU,MANtC,gBAOV,OADLlE,EANe,EAMfA,SAENmF,EAAqB,CAAE5F,KAAMA,EAAMS,MAAOA,IAC1C2F,GAAyB,EACzBpE,GAAa,GACbvB,EAAM4F,2BAA0B,SAAC9G,GAC/BsG,EAAetG,IAC2C,IAArDA,EAAmC+G,eACtCP,GAAoB,OAdH,kDAmBvBxB,EAAa,sBACWvE,EAAKE,KADjB,eAEV,QACA,KAtBqB,yBAyBvB8F,GAAa,GAzBU,8CA4BpBI,GA5BoB,wEA0CvBlE,EAAqB,WAIzB,GAHyB,MAArBnC,GACFkG,EAAalG,EAAkBC,MAE7BwF,EAAUe,OAAS,EAAG,CACxB,IAAMvG,EAAOwF,EAAU,GACX,MAARxF,IACFmG,EAAqBnG,GACrByF,GAAa,SAACe,GAAD,WAAsBA,EAAaC,MAAM,aAEnD,GAAIf,EAAYa,OAAS,EAAG,CACjC,IAAMvG,EAAO0F,EAAY,GACb,MAAR1F,IACFmG,EAAqBnG,GACrB2F,GAAe,SAACe,GAAD,WAAwBA,EAAeD,MAAM,UA6BlE,OAlBAnH,qBAAU,WACJwG,IACEpE,EAPmB,MAArB3B,GACFoG,EAAqBpG,EAAkBC,MASrCkC,IAEF6D,GAAoB,MAErB,CAACD,EAAkBC,IAEtBzG,qBAAU,WACR,GAAgC,OAAX,MAAjBS,OAAA,EAAAA,EAAmBU,OACrB,OAAO,WACLV,EAAkBU,MAAMkG,iBAG3B,OAAC5G,OAAD,EAACA,EAAmBU,QAChB,CACL+E,YACAE,cACAkB,eAnGqB,SAAC5G,GACtByF,GAAa,SAACe,GAAD,oBAAsBA,GAAtB,CAAoCxG,QAmGjD2F,iBACAM,eACAlE,uBA5D6B,WAC7B,GAAIuD,EAAQiB,OAAS,EAAG,CACtB,IAAMvG,EAAOsF,EAAQA,EAAQiB,OAAS,GAC1B,MAARvG,IACFmG,EAAqBnG,GACrBuF,GAAW,SAACW,GAAD,WAAoBA,EAAWO,MAAM,GAAI,QAGxD,OAAO,MAqDPvE,qBACAnC,oBACAoG,uBACAU,oBAvG0B,SAAC7G,GAC3ByF,GAAa,SAACe,GAAD,OAAkBA,EAAaM,QAAO,SAACC,GAAD,OAAOA,GAAK/G,SAuG/DgH,sBArG4B,SAAChH,GAC7B2F,GAAe,SAACe,GAAD,OAAoBA,EAAeI,QAAO,SAACC,GAAD,OAAOA,GAAK/G,SAqGrEiC,YACAD,eACAvC,cACAiC,YACAD,eACAV,a,sCC3KW,SAASkG,EAAYhK,GAAsC,IAAD,IACvE,OACE,eAACkD,EAAA,EAAD,CACEjD,MAAO,CAAEwF,cAAe,MAAOD,eAAgB,aAAcrC,MAAO,KADtE,UAGE,cAACD,EAAA,EAAD,CAAMjD,MAAO,CAAEsF,YAAa,IAA5B,SACE,cAAC0E,EAAA,EAAD,CACEC,cAAeC,IACfC,OAAQ,CAAElC,IAAKlI,EAAM+C,KAAKsH,UAC1BpK,MAAO,CAAEqK,OAAQ,GAAInH,MAAO,GAAI0D,aAAc,OAGlD,eAAC3D,EAAA,EAAD,WACE,cAAC,EAAD,CAAMjD,MAAO,CAAEkE,SAAU,IAAME,cAAc,OAAOD,cAAe,EAAnE,kBACGpE,EAAM+C,KAAKE,MADd,EACsB,aAEtB,cAAC,EAAD,CACEhD,MAAO,CAAEkE,SAAU,GAAIjE,MAAO,QAC9BmE,cAAc,OACdD,cAAe,EAHjB,kBAKGpE,EAAM+C,KAAKC,gBALd,EAKgC,6BCZzB,SAASuH,EAAavK,GACnC,IAAQsH,EAAiBtB,IAAjBsB,aACR,OACE,eAAC5D,EAAA,EAAD,CACEzD,MAAOmD,EAAOW,UACdJ,QAAS,WACF3D,EAAM8D,WACT9D,EAAMwK,aAAaxK,EAAM+C,OAG7Bc,SAAU7D,EAAM8D,UAPlB,UASE,cAACkG,EAAD,CAAajH,KAAM/C,EAAM+C,OACzB,eAACG,EAAA,EAAD,CAAMjD,MAAOmD,EAAOqH,QAApB,UACE,cAAC/G,EAAA,EAAD,CACEC,QAAS,WACP3D,EAAM2J,eAAe3J,EAAM+C,MAC3BuE,EAAa,iBAAkB,YAEjCrH,MAAO,CAAEsF,YAAa,IALxB,SAOE,cAAC,EAAD,CAAMtF,MAAO,CAAEkE,SAAU,IAAzB,sBAEwB,MAAzBnE,EAAM0K,iBACL,cAAChH,EAAA,EAAD,CACEzD,MAAO,CAAEyE,WAAY,GACrBf,QAAS,WACP3D,EAAM0K,gBAAiB1K,EAAM+C,OAHjC,SAME,cAAC,EAAD,CAAM9C,MAAO,CAAEkE,SAAU,IAAzB,4BAQZ,IAAMf,EAAS+B,IAAWC,OAAO,CAC/BrB,UAAW,CACT0B,cAAe,MACfD,eAAgB,gBAChBmF,QAAS,GACT1G,WAAY,UAEdwG,QAAS,CACPhF,cAAe,MACfD,eAAgB,WAChB8E,OAAQ,OACRrG,WAAY,gBCjDD,SAAS2G,EAAY5K,GAClC,OACE,cAAC6K,EAAA,EAAD,CACEC,KAAM9K,EAAM+K,MACZC,WAAY,gBAAGC,EAAH,EAAGA,KAAH,OACV,cAACV,EAAD,CACEzG,UAAW9D,EAAM8D,UACjBf,KAAMkI,EACNT,aAAcxK,EAAMkL,oBACpBvB,eAAgB3J,EAAM2J,eACtBe,gBAAiB1K,EAAM0K,mBAG3BS,aAAc,SAACpI,EAAaqI,GAAd,OACTrI,EAAKsI,kBADI,IACiBtI,EAAKuI,QADtB,IACiCF,GAE/CG,qBACwB,IAAtBvL,EAAMwL,YAAuBxL,EAAMyL,oBAAiBC,I,YCnB7C,SAASC,EAAU3L,GAAqC,IAAD,EAK9D+C,EAAI,SAAG/C,EAAMuC,WAAWO,wBAApB,EAAG,EAAoCC,KACjD,OACE,cAACG,EAAA,EAAD,CAAMjD,MAAOmD,EAAOW,UAApB,SACE,eAAC6H,EAAA,EAAD,CAAc3L,MAAOmD,EAAOyI,aAA5B,UACE,cAACnI,EAAA,EAAD,CACEC,QAAS,kBAAM3D,EAAM8L,wBACrB7L,MAAO,CAAE8L,aAAc,GAAI7H,YAAa,GAAImB,UAAW,IAFzD,SAIE,cAAC,EAAD,CAAMpF,MAAO,CAAEkE,SAAU,IAAzB,sBAEF,cAAC,EAAD,CAAMlE,MAAO,CAAEkE,SAAU,GAAID,YAAa,IAA1C,yBAECnB,GACC,cAACG,EAAA,EAAD,CAAMjD,MAAO,CAAE0K,QAAS,IAAxB,SACE,cAACX,EAAD,CAAajH,KAAMA,MAGtB/C,EAAMuC,WAAWgG,UAAUe,OAAS,GACnC,eAACpG,EAAA,EAAD,WACE,cAAC,EAAD,CAAMjD,MAAO,CAAEkE,SAAU,GAAID,YAAa,IAA1C,qBACA,cAAC0G,EAAD,CACEG,MAAO/K,EAAMuC,WAAWgG,UACxB2C,oBAAqB,SAAOnI,GAAP,SAAAO,EAAAC,OAAA,kEAAAD,EAAA,MACMtD,EAAMuC,WAAW2G,qBACxCnG,IAFiB,eAKjB/C,EAAMuC,WAAWqH,oBAAoB7G,GALpB,6DAQrB4G,eAAgB3J,EAAMuC,WAAWoH,eACjCe,gBAAiB1K,EAAMuC,WAAWqH,oBAClC9F,UAAW9D,EAAMuC,WAAWuB,eAIlC,cAAC,EAAD,CAAM7D,MAAO,CAAEkE,SAAU,GAAID,YAAa,IAA1C,qBACA,cAAC0G,EAAD,CACEG,MAAO/K,EAAMuC,WAAWkG,YACxByC,oBAAqB,SAAOnI,GAAP,SAAAO,EAAAC,OAAA,kEAAAD,EAAA,MACMtD,EAAMuC,WAAW2G,qBACxCnG,IAFiB,eAKjB/C,EAAMuC,WAAWwH,sBAAsBhH,GALtB,6DAQrB4G,eAnDoC,SAAC5G,GAC3C/C,EAAMuC,WAAWwH,sBAAsBhH,GACvC/C,EAAMuC,WAAWoH,eAAe5G,IAkD1B2H,gBAAiB1K,EAAMuC,WAAWwH,sBAClCjG,UAAW9D,EAAMuC,WAAWuB,iBAOtC,IAAMV,EAAS+B,IAAWC,OAAO,CAC/BrB,UAAW,CAAEZ,MAAO,OAAQc,WAAY,SAAU+H,KAAM,EAAG1B,OAAQ,QACnEuB,aAAc,CACZG,KAAM,EACN7I,MAAO,OACPkC,UAAW,M,kBCpEA,SAAS4G,GACtBjM,GACc,IAAD,EACb,OACE,cAAC0D,EAAA,EAAD,CACEzD,MAAOmD,GAAOW,UACdJ,QAAS,WACP3D,EAAMkM,mBAAmBlM,EAAMmM,aAHnC,SAME,cAACjJ,EAAA,EAAD,CAAMjD,MAAOmD,GAAOY,KAApB,SACE,cAACd,EAAA,EAAD,UACE,cAAC,EAAD,CAAMjD,MAAO,CAAEkE,SAAU,IAAME,cAAc,OAAOD,cAAe,EAAnE,kBACGpE,EAAMmM,WAAWlJ,MADpB,EAC4B,mBAQtC,IAAMG,GAAS+B,IAAWC,OAAO,CAC/BrB,UAAW,CACT0B,cAAe,MACfD,eAAgB,gBAChBmF,QAAS,GACT1G,WAAY,UAEdD,KAAM,CACJyB,cAAe,MACfD,eAAgB,aAChBrC,MAAO,SChCI,SAASiJ,GACtBpM,GAEA,OACE,cAAC4L,EAAA,EAAD,UACE,cAACf,EAAA,EAAD,CACEC,KAAM9K,EAAMqM,YACZrB,WAAY,gBAAGC,EAAH,EAAGA,KAAH,OACV,cAACgB,GAAD,CACEE,WAAYlB,EACZiB,mBAAoBlM,EAAMkM,sBAG9Bf,aAAc,SAACgB,GAAD,OAA4BA,EAAWd,uBCQ9C,SAASiB,GACtBtM,GAEA,IAfwCuM,EAexC,EClBK,SACLA,EACAC,GAEA,MAAiCC,YAASC,YAhBP,4QAgB8B,CAC/DC,UAAW,CACTC,oBAAqB,CAACL,IAExBM,MAAOL,IAJDM,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOjC,EAAxB,EAAwBA,KAOxB,MAAO,CACLgC,UACAC,QACAjC,KACU,MAARA,EACI,GACAA,EAAKuB,YAAYW,MAAMC,KAAI,SAACC,GAAD,MAAe,CACxC7B,kBAAmB6B,EAAIC,QACvBC,YAAaF,EAAIE,YACjBnK,KAAMiK,EAAIjK,UDEhBoK,CACFrN,EAAMsN,UAnBK,OAD2Bf,EAqBLvM,EAAMsN,YApBH,IAAjBf,EAAMjD,QAGpBlJ,EAAcmM,IAYVgB,EADX,EACET,QACOU,EAFT,EAEET,MACMU,EAHR,EAGE3C,KAKF,EE1BK,SACLyB,EACAC,GAEA,MAAiCC,YAASC,YAhBF,6PAgB8B,CACpEC,UAAW,CACTJ,MAAOA,GAETM,MAAOL,IAJDM,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOjC,EAAxB,EAAwBA,KAOxB,MAAO,CACLgC,UACAC,QACAjC,KACU,MAARA,EACI,GACAA,EAAK4C,OAAOV,MAAMC,KAAI,SAACC,GAAD,MAAe,CACnC7B,kBAAmB6B,EAAI7B,kBACvB+B,YAAaF,EAAIE,YACjBnK,KAAMiK,EAAIjK,UFUhB0K,CACF3N,EAAMsN,UAtC4B,SAACf,GACrC,OAAa,MAATA,GAAkC,IAAjBA,EAAMjD,UAGvBlJ,EAAcmM,KAAUhM,EAAUgM,IAmCpCqB,CAA8B5N,EAAMsN,YAL3BO,EADX,EACEf,QACOgB,EAFT,EAEEf,MACMgB,EAHR,EAGEjD,KAKIuB,EACJoB,EAAmBnE,OAAS,EAAImE,EAAqBM,EACvD,OACE,cAAC7K,EAAA,EAAD,UACGqK,GAA6BM,EAC5B,cAAC,EAAD,CAAM5N,MAAO,CAAEkE,SAAU,GAAIkB,UAAW,IAAxC,6EAGEmI,GAA2BM,EAC7B,eAAC,EAAD,CAAM7N,MAAO,CAAEkE,SAAU,GAAIkB,UAAW,IAAxC,sCAC4B,OAG5BgH,GACAA,EAAY/C,OAAS,GACnB,cAAC8C,GAAD,CACEC,YAAaA,EACbH,mBAAoBlM,EAAMgO,+B,iCGhDvB,SAASC,GAAYjO,GAAuC,IAAD,EACxE,EAA8BgC,oBAAS,GAAvC,WAAOkM,EAAP,KAAgBC,EAAhB,KAEA,OACE,eAACjL,EAAA,EAAD,CAAMjD,MAAOmD,GAAOW,UAApB,UACE,eAACb,EAAA,EAAD,CACEjD,MAAO,CACLmD,GAAOgL,sBACP,CAAEjL,MAAO+K,EAAU,MAAQ,SAH/B,UAME,eAAChL,EAAA,EAAD,CAAMjD,MAAO,CAAEkD,MAAO,OAAQsC,cAAe,MAAOuG,KAAM,GAA1D,UACE,cAACqC,GAAA,EAAD,CACEpL,KAAK,SACLqL,KAAM,GACNpO,MAAM,QACND,MAAO,CAAEqF,WAAY,KAEvB,cAACiJ,GAAA,EAAD,CACEtO,MAAOmD,GAAOoL,UACdC,aAAa,EACbC,aAAa,MACbC,eAAe,OACfC,YAAa5O,EAAM6O,gBACnBC,cAAc,SACdC,gBAAiB,kBAAM/O,EAAMgP,sBAAsBhP,EAAMiP,OACzDvN,MAAK,SAAE1B,EAAMiP,MAAR,EAAgB,GACrBC,aAAclP,EAAMkP,aACpBC,QAAS,kBAAMhB,GAAW,SAGf,MAAdnO,EAAMiP,MAAgBjP,EAAMiP,KAAK3F,OAAS,GACzC,cAAC5F,EAAA,EAAD,CACEC,QAAS,kBAAM3D,EAAMkP,aAAa,OAClCjP,MAAO,CAAEqE,aAAc,EAAGJ,YAAa,GAFzC,SAIE,cAAC,EAAD,CAAMjE,MAAO,CAAEkE,SAAU,IAAzB,yBAIL+J,GACC,cAACxK,EAAA,EAAD,CACEC,QAAS,WACP3D,EAAMkP,aAAa,MACnBlP,EAAMgP,sBAAsB,MAC5Bb,GAAW,GACXiB,KAASC,WAEXpP,MAAOmD,GAAOkM,aAPhB,SASE,cAAC,EAAD,CAAMrP,MAAO,CAAE0K,QAAS,GAAxB,yBAOV,I,MAAMvH,GAAS+B,IAAWC,OAAO,CAC/BrB,UAAW,CACTwL,OAAQ,GACRtL,WAAY,SACZwB,cAAe,OAEjB2I,sBAAuB,CACrBzD,QAAS,GACTlF,cAAe,MACftE,gBAAiB,UACjB0F,aAAc,GACd5C,WAAY,UAEduK,UAAW,CACTrK,SAAU,GACVmB,WAAY,GACZ0G,KAAM,EACN9L,MAAO,SAEToP,aAAc,CACZhK,WAAY,GACZkK,YAAa,EACbC,YAAa,QACb5I,aAAc,K,qBC9FL6I,GAAgBhD,YAAH,gaA0BbiD,GAAsBjD,YAAH,6eAuB5BgD,IAGG,SAASE,GACdzD,EACA0D,EACAC,EACAC,GAEA,IAAMnD,EACU,MAAdT,OAAqBT,EAAY,CAACS,EAAWd,mBACzC2E,EAAiC,MAAhBH,OAAuBnE,EAAY,CAACmE,GAC3D,EAAiCpD,YAASkD,GAAqB,CAC7DhD,UAAW,CACTC,oBAAqBA,EACrBoD,eAAgBA,EAChBD,MAAK,MAAEA,IAAS,IAChBD,KAAMA,GAERjD,KAAoB,MAAdV,GAAsC,MAAhB0D,IAPtB/C,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOjC,EAAxB,EAAwBA,KAUxB,MAAO,CACLgC,UACAC,QACAjC,KACU,MAARA,EACI,GACAA,EAAKmF,OAAOjD,MAAMC,KAAI,SAACC,GACrB,IAAMgD,EAAQhD,EAAIgD,MAClB,MAAO,CACL7E,kBAAmB6E,EAAM7E,kBACzBC,QAAS4E,EAAM5E,QACfrI,KAAMiN,EAAMjN,KACZD,eAAgBkN,EAAMlN,eACtBmN,MAAOD,EAAMC,MACb/C,YAAa8C,EAAM9C,YACnB1F,SAAUwI,EAAME,QAAQC,cAAcC,SACtCjG,SAAU6F,EAAMK,MAAMF,cAAcG,UACpCC,SAAUP,EAAMO,c,qkBC7Ef,SAASC,GAAc1Q,GACpC,IACA,EAAsCgC,mBAAuB,IAA7D,WAAO2O,EAAP,KAAoBC,EAApB,KAMA,OAJAvO,qBAAU,WACRuO,EAAe5Q,EAAM+K,MAAMvB,MAAM,EAAGxJ,EAAM6Q,OAJ9B,OAKX,CAAC7Q,EAAM6Q,OAAQ7Q,EAAM+K,QAGtB,cAACH,EAAD,SACM5K,GADN,IAEEyL,eACE,cAAC/H,EAAA,EAAD,CACEzD,MAAOmD,GAAOqI,eACd9H,QAAS,kBAAM3D,EAAM8Q,WAAU,SAACC,GAAD,OAAeA,EAbxC,OAWR,SAIE,cAAC,EAAD,CAAM9Q,MAAOmD,GAAO4N,aAApB,yBAGJxF,YAAaxL,EAAM+K,MAAMzB,OAASqH,EAAYrH,OAC9CyB,MAAO4F,KAKb,IAAMvN,GAAS+B,IAAWC,OAAO,CAC/BqG,eAAgB,CACdhG,cAAe,MACfxB,WAAY,SACZuB,eAAgB,SAChBuG,aAAc,IAEhBiF,aAAc,CACZ7M,SAAU,GACVwG,QAAS,EACT6E,YAAa,EACbC,YAAa,QACb5I,aAAc,KChCH,SAASoK,GAAYjR,GAClC,MAII4P,GAAkB5P,EAAMmM,WAAYnM,EAAM6P,cAH5C/C,EADF,EACEA,QACAC,EAFF,EAEEA,MACMmE,EAHR,EAGEpG,KAyBF,OACE,cAACc,EAAA,EAAD,CACE3L,MAAO,CACL+L,KAAM,EACN7I,MAAO,QAHX,SAMG2J,EACC,cAAC5J,EAAA,EAAD,CAAMjD,MAAO,CAAEkD,MAAO,OAAQc,WAAY,UAA1C,SACE,cAAC,EAAD,CAAMhE,MAAO,CAAEkE,SAAU,GAAIkB,UAAW,IAAxC,yEAIA0H,EACF,cAAC7J,EAAA,EAAD,CAAMjD,MAAO,CAAEkD,MAAO,OAAQc,WAAY,UAA1C,SACE,eAAC,EAAD,CAAMhE,MAAO,CAAEkE,SAAU,GAAIkB,UAAW,IAAxC,sCAC4B,SAG5B6L,EAAU5H,OAAS,EACrB,cAACoH,GAAD,CACE3F,MAAOmG,EACPhG,oBA5CwB,SAAOnI,GAAP,yBAAAO,EAAAC,OAAA,kEAAAD,EAAA,MACLtD,EAAMmR,qBAAqBpO,IADtB,OAE9B,GAF8B,QAEZmO,EAAU5H,OAAS,EAAG,CAQtC,GAPM8H,EAAWF,EAAUG,QAAQtO,GAAQ,EACrCuO,EAAYJ,EAAU1H,MAAM4H,EAAUA,EAbxB,IAchBG,EAAY,GACVC,EAAS3Q,KAAK4Q,IAfA,GAgBEH,EAAUhI,OAC9B8H,EAAW,GAjBO,GAmBIE,EAAUhI,OAChC,IAASoI,EAAI,EAAGA,EAAIF,EAAQE,IACpB3O,EAAOmO,EAAUQ,GAClBJ,EAAUK,SAAS5O,IACtBwO,EAAUK,KAAK7O,GAIrB/C,EAAM6R,wBAAN,cAAkCP,GAAcC,IAlBpB,6DA6CxB5H,eAAgB3J,EAAM2J,eACtB7F,UAAW9D,EAAM8D,UACjB+M,OAAQ7Q,EAAM6Q,OACdC,UAAW9Q,EAAM8Q,YAGnB,cAAC5N,EAAA,EAAD,CAAMjD,MAAO,CAAEkD,MAAO,OAAQc,WAAY,UAA1C,SACE,eAAC,EAAD,CAAMhE,MAAO,CAAEkE,SAAU,GAAIkB,UAAW,IAAxC,6BACmB,WC1Ed,SAASyM,GAAe9R,GAKrC,MAII4P,GACF,CAAEvE,kBAAmB,mDACrBK,EACA,CAAEqG,QAAS,SAAUC,cAAe,QACpC,IAPAlF,EADF,EACEA,QACAC,EAFF,EAEEA,MACMmE,EAHR,EAGEpG,KAOF,OACE,eAAC5H,EAAA,EAAD,CAAMjD,MAAO,CAAEkD,MAAO,OAAQ6I,KAAM,GAApC,UACE,cAAC9I,EAAA,EAAD,CAAMjD,MAAO,CAAEkD,MAAO,OAAQc,WAAY,UAA1C,SACE,eAACf,EAAA,EAAD,CAAMjD,MAAO,CAAEkD,MAAO,MAAOc,WAAY,SAAUoB,UAAW,IAA9D,UACE,cAAC,EAAD,CAAMpF,MAAO,CAAEkE,SAAU,GAAI4H,aAAc,IAA3C,mCAGA,eAAC7I,EAAA,EAAD,CAAMjD,MAAO,CAAEgE,WAAY,cAA3B,UACE,cAAC,EAAD,CAAMhE,MAAO,CAAEkE,SAAU,GAAI4H,aAAc,IAA3C,+DAGA,cAAC,EAAD,CAAM9L,MAAO,CAAEkE,SAAU,IAAzB,kEAMN,eAACyH,EAAA,EAAD,CAAc3L,MAAOmD,GAAOyI,aAA5B,UACE,cAAC3I,EAAA,EAAD,CAAMjD,MAAO,CAAEkD,MAAO,OAAQc,WAAY,UAA1C,SACE,cAAC,EAAD,CAAMhE,MAAO,CAAEkE,SAAU,GAAIwG,QAAS,GAAtC,uCAIF,cAACC,EAAD,CACEG,MAAO+B,GAAWC,EAAQ,GAAKmE,EAC/BhG,oBAAqBlL,EAAMkL,oBAC3BvB,eAAgB3J,EAAM2J,eACtB7F,UAAW9D,EAAM8D,kBAO3B,IAAMV,GAAS+B,IAAWC,OAAO,CAC/ByG,aAAc,CACZG,KAAM,EACN3G,UAAW,GACXlC,MAAO,UC/BI,SAAS8O,GAAWjS,GACjC,MASIA,EAAMkS,YARR3F,EADF,EACEA,MACA4F,EAFF,EAEEA,cACA7E,EAHF,EAGEA,UACA8E,EAJF,EAIEA,kBACAC,EALF,EAKEA,mBACAC,EANF,EAMEA,sBACAzB,EAPF,EAOEA,OACAC,EARF,EAQEA,UAGIX,EA9BmB,SACzB5D,EACA8F,GAEA,OAAa,MAAT9F,GAAkC,IAAjBA,EAAMjD,SAGD,MAAtB+I,IAGG9R,EAAUgM,IAAUnM,EAAcmM,KAoB3BgG,CAAmBjF,EAAW+E,GACxC/E,OACA5B,EAEJ,OACE,eAACxI,EAAA,EAAD,CAAMjD,MAAOmD,GAAOW,UAApB,UACE,cAACb,EAAA,EAAD,CAAMjD,MAAOmD,GAAOoP,qBAApB,SACE,cAACtP,EAAA,EAAD,CAAMjD,MAAO,CAAEkD,MAAO,QAAtB,SACE,cAAC8K,GAAD,CACEgB,KAAM1C,EACN2C,aAAciD,EACdnD,sBAAuBoD,QAI7B,eAAClP,EAAA,EAAD,CAAMjD,MAAOmD,GAAOqP,iBAApB,UACgB,MAAbnF,GACC,cAACwE,GAAD,CACE5G,oBAAqBlL,EAAMuC,WAAW2G,qBACtCS,eAAgB3J,EAAMuC,WAAWoH,eACjC7F,UAAW9D,EAAMuC,WAAWuB,YAGT,MAAtBuO,GAA2C,MAAb/E,GAC7B,cAAChB,GAAD,CACEgB,UAAWA,EACXU,2BAA4BsE,KAGR,MAAtBD,GAAuC,MAATlC,IAA+B,MAAb7C,GAChD,cAAC2D,GAAD,CACE9E,WAAU,MAAEkG,SAAsB3G,EAClCmE,aAAY,MAAEM,SAASzE,EACvByF,qBAAsBnR,EAAMuC,WAAW2G,qBACvCS,eAAgB3J,EAAMuC,WAAWoH,eACjCkI,wBAAyB7R,EAAMuC,WAAWmG,eAC1C5E,UAAW9D,EAAMuC,WAAWuB,UAC5B+M,OAAQA,EACRC,UAAWA,UAQvB,IAAM1N,GAAS+B,IAAWC,OAAO,CAC/BrB,UAAW,CACTZ,MAAO,OACPc,WAAY,SACZ+H,KAAM,EACN1B,OAAQ,OACRjF,UAAW,IAEbmN,qBAAsB,CACpB/M,cAAe,MACfxB,WAAY,SACZuB,eAAgB,SAChBrC,MAAO,OAETsP,iBAAkB,CAChBzG,KAAM,EACN7I,MAAO,OACPc,WAAY,Y,SCvFD,SAASyO,GAAa1S,GACnC,IAAM+C,EAAO/C,EAAM+C,KACnB,EAAwCf,oBAAS,GAAjD,WAAO2Q,EAAP,KAAqBC,EAArB,KACA,OACE,cAAC1P,EAAA,EAAD,CAAMjD,MAAOmD,GAAOW,UAApB,SACE,cAAC6H,EAAA,EAAD,CAAc3L,MAAOmD,GAAOyI,aAA5B,SACE,eAACgH,GAAA,EAAD,CAAY5S,MAAO,CAAEiE,YAAa,GAAII,aAAc,IAApD,UACE,eAACpB,EAAA,EAAD,CAAMjD,MAAOmD,GAAO0P,OAApB,UACE,cAAC,EAAD,CAAM7S,MAAO,CAAEkE,SAAU,GAAI4H,aAAc,IAA3C,SAAkDhJ,EAAKE,OACvD,cAACgH,EAAA,EAAD,CACEC,cAAeC,IACfC,OAAQ,CAAElC,IAAG,MAAEnF,OAAF,EAAEA,EAAMsH,UACrBpK,MAAO,CAAEkD,MAAO,IAAKmH,OAAQ,UAGjC,eAAC,EAAD,CAAMrK,MAAO,CAAEkE,SAAU,IAAzB,UACGpB,EAAKC,eADR,KAC0BD,EAAKuI,WAE/B,cAAC,EAAD,CAAMrL,MAAO,CAAE8L,aAAc,IAA7B,SAAoChJ,EAAKsI,oBACzC,eAAC,EAAD,CAAMpL,MAAO,CAAE8L,aAAc,IAA7B,oBAA2ChJ,EAAKoN,SAChD,cAAC,EAAD,CAAMlQ,MAAO,CAAE8L,aAAc,IAA7B,SAAoChJ,EAAKqK,cACzC,eAAClK,EAAA,EAAD,CACEjD,MAAO,CACLkD,MAAO,OACPc,WAAY,SACZuB,eAAgB,UAJpB,UAOE,cAAC9B,EAAA,EAAD,CACEzD,MAAOmD,GAAO2P,mBACdpP,QAAS,kBAAMiP,GAAiBD,IAFlC,SAIE,cAAC,EAAD,CAAM1S,MAAOmD,GAAO4P,iBAApB,SACGL,EAAe,oBAAsB,wBAGzCA,GACC,cAAC,EAAD,CAAM1S,MAAO,CAAE8L,aAAc,IAA7B,SACGkH,KAAKC,UAAUnQ,EAAK0N,SAAU,KAAM,eAUrD,IAAMrN,GAAS+B,IAAWC,OAAO,CAC/BrB,UAAW,CACTZ,MAAO,OACPc,WAAY,SACZ+H,KAAM,EACN1B,OAAQ,QAEVuB,aAAc,CACZG,KAAM,EACN7I,MAAO,QAET2P,OAAQ,CACN3P,MAAO,OACPc,WAAY,SACZoB,UAAW,GACX0G,aAAc,IAEhBgH,mBAAoB,CAClB5P,MAAO,MACPgQ,SAAU,IACVlP,WAAY,SACZ8H,aAAc,GACdyD,YAAa,EACb3I,aAAc,GACd4I,YAAa,SAEfuD,iBAAkB,CAChB7O,SAAU,GACVU,WAAY,GACZH,WAAY,GACZ0O,cAAe,MClFbC,GAAS,IAAIC,IAAa,CAC9BpL,IAAK,8BACLqL,MAAO,IAAIC,MAGE,SAASC,KACtB,IAAMlR,EAAyB6F,IAC/B,EAA8CpG,oBAAS,GAAvD,WAAO0R,EAAP,KAAwBC,EAAxB,KACA,EAAoD3R,oBAAS,GAA7D,WAAO4R,EAAP,KAA2BC,EAA3B,KACA,EAA8C7R,oBAAS,GAAvD,WAAO8R,EAAP,KAAwBC,EAAxB,KACM7B,ECPD,WACL,MAA0BlQ,mBAAwB,MAAlD,WAAOuK,EAAP,KAAcyH,EAAd,KACA,EAAkChS,mBAAwB,MAA1D,WAAOsL,EAAP,KAAkB2G,EAAlB,KACA,EAA4BjS,mBAAS,GAArC,WAAO6O,EAAP,KAAeC,EAAf,KACA,EACE9O,mBAA4B,MAD9B,WAAOqQ,EAAP,KAA2BC,EAA3B,KAGA,MAAO,CACL/F,MAAOA,EACP4F,cAAe,SAAC5F,GAAD,OAA0ByH,EAASzH,IAClDe,UAAWA,EACX8E,kBAAmB,SAAC9E,GAClBgF,EAAsB,MACtBxB,EAAU,GAERmD,EADe,MAAb3G,EACyBA,EtB7BrB4G,cAAcC,OsB+BP,OAGjB9B,qBACAC,wBACAzB,SACAC,aDhBkBsD,GAepB,OAdA/R,qBAAU,WASHyR,IARc,EAAAxQ,EAAAC,OAAA,kEAAAD,EAAA,MACXyE,IAAMsM,kBAAkB,CAC5BC,yBAAyB,EACzBC,oBAAqBC,IAAoBC,SACzCC,oBAAoB,EACpBC,sBAAsB,KALP,4DAUjBZ,GAAmB,OAIrB,cAAC,IAAD,UACE,cAACa,EAAA,EAAD,CAAgBvB,OAAQA,GAAxB,SACE,eAACnQ,EAAA,EAAD,CAAMjD,MAAOmD,GAAOW,UAApB,UACE,cAAC8Q,EAAA,EAAD,IACA,eAAC3R,EAAA,EAAD,CAAMjD,MAAOmD,GAAO0R,OAApB,UACE,eAAC5R,EAAA,EAAD,CACEjD,MAAO,CACLkD,MAAO,OACPc,WAAY,SACZ+H,KAAM,GAJV,UAOG4H,GAAsD,MAAhCrR,EAAWO,mBAChC,cAAC4P,GAAD,CAAc3P,KAAMR,EAAWO,kBAAkBC,OAElD2Q,GACC,cAAC/H,EAAD,CACEpJ,WAAYA,EACZuJ,qBAAsB,kBAAM6H,GAAmB,OAGjDC,IAAuBF,GACvB,cAACzB,GAAD,CAAYC,YAAaA,EAAa3P,WAAYA,OAGtD,cAACW,EAAA,EAAD,CAAMjD,MAAOmD,GAAO2R,OAApB,SACE,cAACrP,EAAD,CACEnD,WAAYA,EACZwD,2BAA4B,WAC1B8N,GAAuBD,GACvBD,GAAmB,IAErBzO,sBAAuB,WAChBwO,EAIHC,GAAmB,IAHnBA,GAAmB,GACnBE,GAAsB,mBAc1C,IAAMzQ,GAAS+B,IAAWC,OAAO,CAC/BrB,UAAW,CACT5C,gBAAiB,UACjB8C,WAAY,SACZ+H,KAAM,GAER8I,OAAQ,CACN3R,MAAO,OACPc,WAAY,SACZ+H,KAAM,EACN3G,UAAW,IAEb0P,OAAQ,CACN5R,MAAO,OACPc,WAAY,SACZqG,OAAQ,IACR0K,YAAa,UACbC,aAAc,CAAE9R,MAAO,EAAGmH,QAAS,GACnCvD,eAAgB,GAChBmO,gBAAiB,GACjBC,iBAAkB,GAClBC,oBAAqB,GACrBC,qBAAsB,GACtBC,cAAe,GACfC,aAAc,EACdpU,gBAAiB,Y","file":"static/js/app.b3850c05.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARMAAAC3CAMAAAAGjUrGAAAAM1BMVEXExMT////BwcHo6Oju7u7Y2Nj5+fn09PTJycn8/PzPz8/GxsbU1NTMzMzl5eXp6enf3984nfntAAADJ0lEQVR4nO3cjZKaMBRAYYiIIL/v/7SLii6SEEGJeC/n60yn0+q4OcUAUYgiAAAAAAAAAAAAAAAAAAAAAAAA4OcZU1VZIFVhzNbjW84UzSkOJ0/arUe4mDnmAYtcpWdZm4o5hi7Syc9bD3MJU34hSRcl23qgS4ScSgaSrcc531feOVfl1kOdrbhvJskhkKR/gaOYabZIbz9xbYJphDY5hXuF+7uTJv9oYqOJTVGT1U7ctDQporJts6JY4xVUNDFZk1/+Nk9P5QrjMK38Jk+nycnnpykKtpP7f2sv/TiK/CajJN2/fBpFfBPHysGnu2nxTVwrB9VnryC+ydlOEjefDUZ6E3NwNElfHqZ4Ryu+iXPR7eVq0MG3BC2+SfJOkzrOPVF22aSOY18U8U3eeO/cpqDpKOKbuFasvXPsY1aejCK9SeT6sMe3Lx7sqKaiiG/iOmbzfYTXDB43EUV+E/ugrfY8u3l6pDuK/CbXvciQ7/O7ZvRYZxQFTUZRkumzHceO2xVFQ5OoHKwp1Z5jMdexjCOKiiYmK28zbVpnnnE4D++6GXn8FBVNLud0VZF1vzwbyTl1J7G3FCVNXppO0kUZLWzvpImpppNYUfbRxFQvvgD3FGUXTV4meY6yhya+ueRhEEBfE/twY06S4YGNuiamHe9F5iUZnCZpa2Lq8YTp3eM8OfTPU9bEXM99BlFmTK9WFGVN+tPBR5RFSe5ziqom5nGG3EeZPZf0EnVNzGDR4BplaRJ9TczTOkoXZXESdU3MaL2tXDiXKGwyThLH4++l7K+JleQdqpo4v16w7ybZxLLijptkS/cv+puslkRPk/knebtpUq14eaCSJituJVqauL+nRBOa0MRGExtNbDSx0cRGExtNbDSxjZo0aXq6SB+/vf/HVOHnOyuhiY0mNprY5DYJ9wOLbRKfw907SN79Cvq1xjQJJpfWxLoWP5hWTJMoC36zx5vXVyn/DvvT8jDk3LLuYnxlUhC+q8V+0ReiSEsSRcdVT4dtibDbx14YkxVtE+Z2j01b+K6M+mnhjtm2HhkAAAAAAAAAAAAAAAAAAAAAAAAAAN/0B81WMJZb1X1AAAAAAElFTkSuQmCC\"","import { Text as ReactNativeText, TextProps } from \"react-native\";\n\nexport default function Text(props: TextProps): JSX.Element {\n  return (\n    <ReactNativeText {...props} style={[{ color: \"white\" }, props.style]}>\n      {props.children}\n    </ReactNativeText>\n  );\n}\n","export const normalizeText = (text: string): string => {\n  return text.toLowerCase().trim();\n};\n\nexport const isAddressLike = (maybeAddress: string): boolean => {\n  if (!/^(0x)?[0-9a-f]{40}$/i.test(maybeAddress)) {\n    return false;\n  } else {\n    return true;\n  }\n};\n\nexport const isEnsLike = (maybeEns: string): boolean => {\n  return maybeEns.endsWith(\".eth\");\n};\n\nexport const formatMs = (millis: number): string => {\n  const minutes = Math.floor(millis / 60000);\n  const seconds = parseFloat(((millis % 60000) / 1000).toFixed(0));\n  return seconds == 60\n    ? minutes + 1 + \":00\"\n    : minutes + \":\" + (seconds < 10 ? \"0\" : \"\") + seconds;\n};\n","import { AVPlaybackStatusSuccess } from \"expo-av\";\nimport { useEffect, useState } from \"react\";\nimport { Platform, StyleSheet, TouchableOpacity, View } from \"react-native\";\nimport Slider from \"@react-native-community/slider\";\nimport { QueueState } from \"../hooks/useQueue\";\nimport Text from \"./Text\";\nimport { formatMs } from \"../utils\";\n\nfunction TrackSlider(props: {\n  curMs: number;\n  endMs: number;\n  onSlidingStart: () => void;\n  onSlidingComplete: (value: number) => void;\n}): JSX.Element {\n  return (\n    <Slider\n      style={{ backgroundColor: \"rgba(255,255,255,0)\" }}\n      minimumTrackTintColor=\"#5c5c5c00\"\n      maximumTrackTintColor=\"#5c5c5c00\"\n      thumbTintColor=\"#5c5c5c\"\n      minimumValue={0}\n      maximumValue={props.endMs}\n      value={props.curMs}\n      tapToSeek={true}\n      onSlidingStart={props.onSlidingStart}\n      onSlidingComplete={props.onSlidingComplete}\n    />\n  );\n}\n\ninterface PlayerControlProps {\n  queueState: QueueState;\n  onChangeIsPlayerOpen: () => void;\n  handleToggleQueueView: () => void;\n}\n\nexport default function PlayerControls(props: PlayerControlProps): JSX.Element {\n  const [curMs, setCurMs] = useState(0);\n  const [endMs, setEndMs] = useState(1);\n  const [isSliding, setIsSliding] = useState(false);\n\n  useEffect(() => {\n    const status = props.queueState.soundStatus as AVPlaybackStatusSuccess;\n    if (status != null && !isSliding) {\n      const duration =\n        status.durationMillis != null && !isNaN(status.durationMillis)\n          ? status.durationMillis\n          : 1;\n      setCurMs(status.positionMillis);\n      setEndMs(duration);\n    }\n  }, [props.queueState.soundStatus, setCurMs, setEndMs, isSliding]);\n\n  const nowPlaying = props.queueState.currentLoadedSong\n    ? `${props.queueState.currentLoadedSong.song.collectionName}: ${props.queueState.currentLoadedSong.song.name}`\n    : \"~ vibing to silence ~\";\n  return (\n    <View style={{ width: \"100%\" }}>\n      <View style={styles.sliderView}>\n        <TrackSlider\n          curMs={curMs}\n          endMs={endMs}\n          onSlidingStart={() => setIsSliding(true)}\n          onSlidingComplete={async (value: number) => {\n            await props.queueState.currentLoadedSong?.sound.setPositionAsync(\n              value\n            );\n            setIsSliding(false);\n          }}\n        />\n      </View>\n      <View>\n        <TouchableOpacity\n          onPress={() => {\n            if (props.queueState.currentLoadedSong != null) {\n              props.onChangeIsPlayerOpen();\n            }\n          }}\n          disabled={\n            props.queueState.currentLoadedSong == null ||\n            props.queueState.isLoading\n          }\n          style={styles.container}\n        >\n          <View style={styles.view}>\n            <View style={{ alignItems: \"center\", paddingLeft: 10 }}>\n              <Text style={{ fontSize: 12 }} numberOfLines={1}>\n                {formatMs(curMs)}\n              </Text>\n            </View>\n            <View style={{ width: 240, alignItems: \"center\" }}>\n              <Text\n                style={{ fontSize: 16 }}\n                numberOfLines={1}\n                ellipsizeMode=\"tail\"\n              >\n                {nowPlaying}\n              </Text>\n            </View>\n            <View style={{ alignItems: \"center\", paddingRight: 10 }}>\n              <Text style={{ fontSize: 12 }} numberOfLines={1}>\n                {formatMs(endMs - curMs)}\n              </Text>\n            </View>\n          </View>\n          <View style={styles.controlsView}>\n            <TouchableOpacity\n              onPress={() =>\n                props.queueState.setIsLooping(!props.queueState.isLooping)\n              }\n              style={{ paddingTop: 4 }}\n            >\n              <Text\n                style={{\n                  fontSize: Platform.OS === \"web\" ? 24 : 42,\n                  lineHeight: Platform.OS === \"web\" ? 48 : 48,\n                  color: props.queueState.isLooping ? \"#9B59B6\" : \"white\",\n                }}\n              >\n                ⟳\n              </Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              onPress={() => props.queueState.handlePlayPreviousSong()}\n              disabled={props.queueState.isLoading}\n            >\n              <Text style={{ fontSize: 48 }}>🌜</Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              onPress={() => {\n                if (props.queueState.currentLoadedSong != null) {\n                  props.queueState.setIsPlaying(!props.queueState.isPlaying);\n                }\n              }}\n              disabled={props.queueState.currentLoadedSong == null}\n            >\n              {props.queueState.isPlaying ? (\n                <Text style={{ fontSize: 48 }}>🌝</Text>\n              ) : (\n                <Text style={{ fontSize: 48 }}>🌞</Text>\n              )}\n            </TouchableOpacity>\n            <TouchableOpacity\n              onPress={() => props.queueState.handlePlayNextSong()}\n              disabled={props.queueState.isLoading}\n            >\n              <Text style={{ fontSize: 48 }}>🌛</Text>\n            </TouchableOpacity>\n            <TouchableOpacity onPress={props.handleToggleQueueView}>\n              <Text\n                style={{\n                  fontSize: 32,\n                  lineHeight: 48,\n                }}\n              >\n                ≡\n              </Text>\n            </TouchableOpacity>\n          </View>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  sliderView: {\n    marginTop: Platform.OS === \"web\" ? -10 : -20,\n    marginLeft: 10,\n    marginRight: 10,\n  },\n  container: {\n    width: \"100%\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n  },\n  view: {\n    width: \"100%\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n  },\n  controlsView: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    width: \"100%\",\n    paddingTop: 30,\n    paddingLeft: \"10%\",\n    paddingRight: \"10%\",\n  },\n});\n","import { Sound } from \"expo-av/build/Audio\";\nimport { useEffect } from \"react\";\nimport { View } from \"react-native\";\nimport { QueueState } from \"../hooks/useQueue\";\nimport PlayerControls from \"./PlayerControls\";\n\nconst playSound = async (sound: Sound | null) => {\n  if (sound != null) {\n    await sound.playAsync();\n  }\n};\n\nconst pauseSong = async (sound: Sound | null) => {\n  if (sound != null) {\n    await sound.pauseAsync();\n  }\n};\n\ninterface PlayerProps {\n  queueState: QueueState;\n  onChangeIsSongInfoViewOpen: () => void;\n  handleToggleQueueView: () => void;\n}\n\nexport default function Player(props: PlayerProps): JSX.Element {\n  const sound = props.queueState.currentLoadedSong?.sound;\n\n  useEffect(() => {\n    if (sound != null) {\n      if (props.queueState.isPlaying) {\n        playSound(sound);\n      } else {\n        pauseSong(sound);\n      }\n    }\n  }, [props.queueState.isPlaying, sound]);\n  return (\n    <View\n      style={{\n        width: \"100%\",\n      }}\n    >\n      <PlayerControls\n        queueState={props.queueState}\n        onChangeIsPlayerOpen={props.onChangeIsSongInfoViewOpen}\n        handleToggleQueueView={props.handleToggleQueueView}\n      />\n    </View>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport Toast from \"react-native-root-toast\";\n\ntype ToastType = \"success\" | \"error\";\n\nexport interface ToastState {\n  displayToast: (message: string, type: ToastType, durationMs?: number) => void;\n}\n\nexport function useToast(): ToastState {\n  const [showToast, setShowToast] = useState(false);\n  const [message, setMessage] = useState<string | null>(null);\n  const [toastType, setToastType] = useState<ToastType | null>(null);\n  const [duration, setDuration] = useState<number | null>(null);\n\n  const displayToast = (\n    toastMessage: string,\n    toastType: ToastType,\n    durationMs?: number\n  ) => {\n    setMessage(toastMessage);\n    setShowToast(true);\n    setToastType(toastType);\n    if (durationMs != null) {\n      setDuration(durationMs);\n    }\n  };\n\n  useEffect(() => {\n    if (showToast && message != null && toastType != null) {\n      let toast = Toast.show(message, {\n        shadow: false,\n        backgroundColor: \"white\",\n        containerStyle: {\n          width: \"100%\",\n          borderRadius: 10,\n          borderTopColor: toastType === \"success\" ? \"limegreen\" : \"red\",\n          borderTopWidth: 8,\n        },\n        position: -200,\n        animation: true,\n        hideOnPress: true,\n        textColor: \"#2d2d2d\",\n      });\n\n      setTimeout(() => {\n        Toast.hide(toast);\n        setShowToast(false);\n      }, duration ?? 700);\n    }\n  }, [showToast, message, toastType, duration]);\n\n  return {\n    displayToast,\n  };\n}\n","import { Sound } from \"expo-av/build/Audio\";\nimport { Audio, AVPlaybackStatus, AVPlaybackStatusSuccess } from \"expo-av\";\nimport { useEffect, useState } from \"react\";\nimport { Token } from \"../models/token\";\nimport { useToast } from \"./useToast\";\n\nexport interface LoadedSong {\n  song: Token;\n  sound: Sound;\n}\n\nexport interface QueueState {\n  userQueue: Array<Token>;\n  globalQueue: Array<Token>;\n  addToUserQueue: (song: Token) => void;\n  setGlobalQueue: (songs: Array<Token>) => void;\n  addToHistory: (song: Token) => void;\n  handlePlayPreviousSong: () => void;\n  handlePlayNextSong: () => void;\n  currentLoadedSong: LoadedSong | null;\n  handleSetCurrentSong: (song: Token | null) => Promise<boolean>;\n  removeFromUserQueue: (song: Token) => void;\n  removeFromGlobalQueue: (song: Token) => void;\n  isPlaying: boolean;\n  setIsPlaying: (isPlaying: boolean) => void;\n  soundStatus: AVPlaybackStatus | null;\n  isLooping: boolean;\n  setIsLooping: (isLooping: boolean) => void;\n  isLoading: boolean;\n}\n\nfunction fetchSoundWithTimeout(\n  audioUri: string,\n  timeoutMs: number\n): Promise<{ sound: Sound; status: AVPlaybackStatus }> {\n  return new Promise(function (resolve, reject) {\n    Audio.Sound.createAsync({\n      uri: audioUri,\n    }).then(resolve, reject);\n    setTimeout(reject, timeoutMs);\n  });\n}\n\nexport function useQueue(): QueueState {\n  const { displayToast } = useToast();\n  const [history, setHistory] = useState<Array<Token>>([]);\n  const [userQueue, setUserQueue] = useState<Array<Token>>([]);\n  const [globalQueue, setGlobalQueue] = useState<Array<Token>>([]);\n  const [currentLoadedSong, setCurrentLoadedSong] = useState<LoadedSong | null>(\n    null\n  );\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [soundStatus, setSoundStatus] = useState<AVPlaybackStatus | null>(null);\n  const [songJustFinished, setSongJustFinished] = useState(false);\n  const [isLooping, setIsLooping] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // History\n  const addToHistory = (song: Token) => {\n    setHistory((curHistory: Array<Token>) => [...curHistory, song]);\n  };\n\n  // Queueing\n  const addToUserQueue = (song: Token) => {\n    setUserQueue((curUserQueue) => [...curUserQueue, song]);\n  };\n  const removeFromUserQueue = (song: Token) => {\n    setUserQueue((curUserQueue) => curUserQueue.filter((s) => s != song));\n  };\n  const removeFromGlobalQueue = (song: Token) => {\n    setGlobalQueue((curGlobalQueue) => curGlobalQueue.filter((s) => s != song));\n  };\n\n  // Playback\n  const handleSetCurrentSong = async (song: Token | null): Promise<boolean> => {\n    let didSuccessfullySetSong = false;\n\n    if (song != null && song.audioUri != null && !isLoading) {\n      try {\n        setIsLoading(true);\n        const { sound } = await fetchSoundWithTimeout(song.audioUri, 3000);\n        if (sound != null) {\n          setCurrentLoadedSong({ song: song, sound: sound });\n          didSuccessfullySetSong = true;\n          setIsPlaying(true);\n          sound.setOnPlaybackStatusUpdate((status: AVPlaybackStatus) => {\n            setSoundStatus(status);\n            if ((status as AVPlaybackStatusSuccess).didJustFinish === true) {\n              setSongJustFinished(true);\n            }\n          });\n        }\n      } catch (e) {\n        displayToast(\n          `audio encoding for ${song.name} in progress`,\n          \"error\",\n          2000\n        );\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    return didSuccessfullySetSong;\n  };\n\n  const handlePlayPreviousSong = () => {\n    if (history.length > 0) {\n      const song = history[history.length - 1];\n      if (song != null) {\n        handleSetCurrentSong(song);\n        setHistory((curHistory) => [...curHistory.slice(0, -1)]);\n      }\n    }\n    return null;\n  };\n\n  const handlePlayNextSong = () => {\n    if (currentLoadedSong != null) {\n      addToHistory(currentLoadedSong.song);\n    }\n    if (userQueue.length > 0) {\n      const song = userQueue[0];\n      if (song != null) {\n        handleSetCurrentSong(song);\n        setUserQueue((curUserQueue) => [...curUserQueue.slice(1)]);\n      }\n    } else if (globalQueue.length > 0) {\n      const song = globalQueue[0];\n      if (song != null) {\n        handleSetCurrentSong(song);\n        setGlobalQueue((curGlobalQueue) => [...curGlobalQueue.slice(1)]);\n      }\n    }\n  };\n\n  const replayCurrentSong = () => {\n    if (currentLoadedSong != null) {\n      handleSetCurrentSong(currentLoadedSong.song);\n    }\n  };\n\n  useEffect(() => {\n    if (songJustFinished) {\n      if (isLooping) {\n        replayCurrentSong();\n      } else {\n        handlePlayNextSong();\n      }\n      setSongJustFinished(false);\n    }\n  }, [songJustFinished, setSongJustFinished]);\n\n  useEffect(() => {\n    if (currentLoadedSong?.sound != null) {\n      return () => {\n        currentLoadedSong.sound.unloadAsync();\n      };\n    }\n  }, [currentLoadedSong?.sound]);\n  return {\n    userQueue,\n    globalQueue,\n    addToUserQueue,\n    setGlobalQueue,\n    addToHistory,\n    handlePlayPreviousSong,\n    handlePlayNextSong,\n    currentLoadedSong,\n    handleSetCurrentSong,\n    removeFromUserQueue,\n    removeFromGlobalQueue,\n    isPlaying,\n    setIsPlaying,\n    soundStatus,\n    isLooping,\n    setIsLooping,\n    isLoading,\n  };\n}\n","import imageLoading from \"../assets/image-loading.png\";\nimport { Image, View } from \"react-native\";\nimport { Token } from \"../models/token\";\nimport Text from \"./Text\";\n\nexport default function SongDisplay(props: { song: Token }): JSX.Element {\n  return (\n    <View\n      style={{ flexDirection: \"row\", justifyContent: \"flex-start\", width: 220 }}\n    >\n      <View style={{ marginRight: 10 }}>\n        <Image\n          defaultSource={imageLoading}\n          source={{ uri: props.song.imageUri }}\n          style={{ height: 33, width: 33, borderRadius: 4 }}\n        />\n      </View>\n      <View>\n        <Text style={{ fontSize: 14 }} ellipsizeMode=\"tail\" numberOfLines={1}>\n          {props.song.name ?? \"untitled\"}\n        </Text>\n        <Text\n          style={{ fontSize: 14, color: \"gray\" }}\n          ellipsizeMode=\"tail\"\n          numberOfLines={1}\n        >\n          {props.song.collectionName ?? \"unknown collection\"}\n        </Text>\n      </View>\n    </View>\n  );\n}\n","import { StyleSheet, TouchableOpacity, View } from \"react-native\";\nimport { useToast } from \"../hooks/useToast\";\nimport { Token } from \"../models/token\";\nimport SongDisplay from \"./SongDisplay\";\nimport Text from \"./Text\";\n\ninterface SongListItemProps {\n  isLoading: boolean;\n  song: Token;\n  onChangeSong: (song: Token) => void;\n  addToUserQueue: (song: Token) => void;\n  removeFromQueue?: (song: Token) => void;\n}\n\nexport default function SongListItem(props: SongListItemProps): JSX.Element {\n  const { displayToast } = useToast();\n  return (\n    <TouchableOpacity\n      style={styles.container}\n      onPress={() => {\n        if (!props.isLoading) {\n          props.onChangeSong(props.song);\n        }\n      }}\n      disabled={props.isLoading}\n    >\n      <SongDisplay song={props.song} />\n      <View style={styles.buttons}>\n        <TouchableOpacity\n          onPress={() => {\n            props.addToUserQueue(props.song);\n            displayToast(\"added to queue\", \"success\");\n          }}\n          style={{ marginRight: 20 }}\n        >\n          <Text style={{ fontSize: 24 }}>＋</Text>\n        </TouchableOpacity>\n        {props.removeFromQueue != null && (\n          <TouchableOpacity\n            style={{ paddingTop: 6 }}\n            onPress={() => {\n              props.removeFromQueue!(props.song);\n            }}\n          >\n            <Text style={{ fontSize: 20 }}>✕</Text>\n          </TouchableOpacity>\n        )}\n      </View>\n    </TouchableOpacity>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    padding: 16,\n    alignItems: \"center\",\n  },\n  buttons: {\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    height: \"100%\",\n    alignItems: \"flex-start\",\n  },\n});\n","import { FlatList } from \"react-native\";\nimport { Token } from \"../models/token\";\nimport SongListItem from \"./SongListItem\";\n\ninterface SongListingProps {\n  songs: Array<Token>;\n  onChangeCurrentSong: (song: Token) => void;\n  addToUserQueue: (song: Token) => void;\n  removeFromQueue?: (song: Token) => void;\n  hasNextPage?: boolean;\n  loadMoreButton?: JSX.Element;\n  isLoading: boolean;\n}\n\nexport default function SongListing(props: SongListingProps): JSX.Element {\n  return (\n    <FlatList\n      data={props.songs}\n      renderItem={({ item }) => (\n        <SongListItem\n          isLoading={props.isLoading}\n          song={item}\n          onChangeSong={props.onChangeCurrentSong}\n          addToUserQueue={props.addToUserQueue}\n          removeFromQueue={props.removeFromQueue}\n        />\n      )}\n      keyExtractor={(song: Token, idx: number) =>\n        `${song.collectionAddress}-${song.tokenId}-${idx}`\n      }\n      ListFooterComponent={\n        props.hasNextPage === true ? props.loadMoreButton : undefined\n      }\n    />\n  );\n}\n","import { Token } from \"../models/token\";\nimport SongListing from \"../components/SongListing\";\nimport { SafeAreaView, StyleSheet, TouchableOpacity, View } from \"react-native\";\nimport { QueueState } from \"../hooks/useQueue\";\nimport SongDisplay from \"../components/SongDisplay\";\nimport Text from \"../components/Text\";\n\ninterface QueueViewProps {\n  queueState: QueueState;\n  handleCloseQueueView: () => void;\n}\n\nexport default function QueueView(props: QueueViewProps): JSX.Element {\n  const handleAddToUserQueueFromGlobalQueue = (song: Token) => {\n    props.queueState.removeFromGlobalQueue(song);\n    props.queueState.addToUserQueue(song);\n  };\n  const song = props.queueState.currentLoadedSong?.song;\n  return (\n    <View style={styles.container}>\n      <SafeAreaView style={styles.safeAreaView}>\n        <TouchableOpacity\n          onPress={() => props.handleCloseQueueView()}\n          style={{ marginBottom: 24, paddingLeft: 16, marginTop: 10 }}\n        >\n          <Text style={{ fontSize: 24 }}>✕</Text>\n        </TouchableOpacity>\n        <Text style={{ fontSize: 18, paddingLeft: 16 }}>now playing</Text>\n\n        {song && (\n          <View style={{ padding: 16 }}>\n            <SongDisplay song={song} />\n          </View>\n        )}\n        {props.queueState.userQueue.length > 0 && (\n          <View>\n            <Text style={{ fontSize: 18, paddingLeft: 16 }}>up next</Text>\n            <SongListing\n              songs={props.queueState.userQueue}\n              onChangeCurrentSong={async (song: Token) => {\n                const didSetSong = await props.queueState.handleSetCurrentSong(\n                  song\n                );\n                if (didSetSong) {\n                  props.queueState.removeFromUserQueue(song);\n                }\n              }}\n              addToUserQueue={props.queueState.addToUserQueue}\n              removeFromQueue={props.queueState.removeFromUserQueue}\n              isLoading={props.queueState.isLoading}\n            />\n          </View>\n        )}\n        <Text style={{ fontSize: 18, paddingLeft: 16 }}>similar</Text>\n        <SongListing\n          songs={props.queueState.globalQueue}\n          onChangeCurrentSong={async (song: Token) => {\n            const didSetSong = await props.queueState.handleSetCurrentSong(\n              song\n            );\n            if (didSetSong) {\n              props.queueState.removeFromGlobalQueue(song);\n            }\n          }}\n          addToUserQueue={handleAddToUserQueueFromGlobalQueue}\n          removeFromQueue={props.queueState.removeFromGlobalQueue}\n          isLoading={props.queueState.isLoading}\n        />\n      </SafeAreaView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: { width: \"100%\", alignItems: \"center\", flex: 1, height: \"100%\" },\n  safeAreaView: {\n    flex: 1,\n    width: \"100%\",\n    marginTop: 20,\n  },\n});\n","import { Collection } from \"../models/collection\";\nimport { StyleSheet, TouchableOpacity, View } from \"react-native\";\nimport SongDisplay from \"./SongDisplay\";\nimport Text from \"./Text\";\n\ninterface CollectionListItemProps {\n  collection: Collection;\n  onChangeCollection: (collection: Collection | null) => void;\n}\n\nexport default function CollectionListItem(\n  props: CollectionListItemProps\n): JSX.Element {\n  return (\n    <TouchableOpacity\n      style={styles.container}\n      onPress={() => {\n        props.onChangeCollection(props.collection);\n      }}\n    >\n      <View style={styles.view}>\n        <View>\n          <Text style={{ fontSize: 14 }} ellipsizeMode=\"tail\" numberOfLines={1}>\n            {props.collection.name ?? \"untitled\"}\n          </Text>\n        </View>\n      </View>\n    </TouchableOpacity>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    padding: 16,\n    alignItems: \"center\",\n  },\n  view: {\n    flexDirection: \"row\",\n    justifyContent: \"flex-start\",\n    width: \"90%\",\n  },\n});\n","import { FlatList, SafeAreaView } from \"react-native\";\nimport { Collection } from \"../models/collection\";\nimport CollectionListItem from \"./CollectionListItem\";\n\ninterface CollectionListingProps {\n  collections: Array<Collection>;\n  onChangeCollection: (collection: Collection | null) => void;\n}\n\nexport default function CollectionListing(\n  props: CollectionListingProps\n): JSX.Element {\n  return (\n    <SafeAreaView>\n      <FlatList\n        data={props.collections}\n        renderItem={({ item }) => (\n          <CollectionListItem\n            collection={item}\n            onChangeCollection={props.onChangeCollection}\n          />\n        )}\n        keyExtractor={(collection: Collection) => collection.collectionAddress}\n      />\n    </SafeAreaView>\n  );\n}\n","import { View } from \"react-native\";\nimport { useFetchCollectionsByAddress } from \"../hooks/useFetchCollectionsByAddress\";\nimport { useFetchCollectionsByName } from \"../hooks/useFetchCollectionsByName\";\nimport { Collection } from \"../models/collection\";\nimport { isAddressLike, isEnsLike } from \"../utils\";\nimport CollectionListing from \"./CollectionListing\";\nimport Text from \"./Text\";\n\nconst shouldSearchCollectionsByName = (query: string | null): boolean => {\n  if (query == null || query.length === 0) {\n    return false;\n  }\n  if (isAddressLike(query) || isEnsLike(query)) {\n    return false;\n  }\n  return true;\n};\n\nconst shouldSearchCollectionsByAddress = (query: string | null): boolean => {\n  if (query == null || query.length === 0) {\n    return false;\n  }\n  return isAddressLike(query);\n};\n\ninterface CollectionFetcherProps {\n  submitted: string | null;\n  onChangeSelectedCollection: (collection: Collection | null) => void;\n}\n\nexport default function CollectionFetcher(\n  props: CollectionFetcherProps\n): JSX.Element {\n  const {\n    loading: queriedCollectionsLoading,\n    error: queriedCollectionsError,\n    data: queriedCollections,\n  } = useFetchCollectionsByAddress(\n    props.submitted,\n    shouldSearchCollectionsByAddress(props.submitted)\n  );\n  const {\n    loading: searchedCollectionsLoading,\n    error: searchedCollectionsError,\n    data: searchedCollections,\n  } = useFetchCollectionsByName(\n    props.submitted,\n    shouldSearchCollectionsByName(props.submitted)\n  );\n  const collections =\n    queriedCollections.length > 0 ? queriedCollections : searchedCollections;\n  return (\n    <View>\n      {queriedCollectionsLoading || searchedCollectionsLoading ? (\n        <Text style={{ fontSize: 16, marginTop: 20 }}>\n          ❀ ❀ ❀ searching collections ❀ ❀ ❀\n        </Text>\n      ) : queriedCollectionsError || searchedCollectionsError ? (\n        <Text style={{ fontSize: 16, marginTop: 20 }}>\n          we encountered an error :{\"(\"}\n        </Text>\n      ) : (\n        collections &&\n        collections.length > 0 && (\n          <CollectionListing\n            collections={collections}\n            onChangeCollection={props.onChangeSelectedCollection}\n          />\n        )\n      )}\n    </View>\n  );\n}\n","import { ApolloError, gql, useQuery } from \"@apollo/client\";\nimport { Collection } from \"../models/collection\";\n\nexport const CollectionsQuery: string = `\n    query FindCollection($collectionAddresses: [String!]!) {\n      collections(pagination: {limit: 50}, where: {collectionAddresses: $collectionAddresses}) {\n        nodes {\n          address\n          description\n          name\n        }\n      }\n    }\n`;\n\nexport function useFetchCollectionsByAddress(\n  query: string | null,\n  shouldPerformQuery: boolean\n): { loading: boolean; error?: ApolloError; data: Array<Collection> } {\n  const { loading, error, data } = useQuery(gql(CollectionsQuery), {\n    variables: {\n      collectionAddresses: [query],\n    },\n    skip: !shouldPerformQuery,\n  });\n\n  return {\n    loading,\n    error,\n    data:\n      data == null\n        ? []\n        : data.collections.nodes.map((res: any) => ({\n            collectionAddress: res.address,\n            description: res.description,\n            name: res.name,\n          })),\n  };\n}\n","import { ApolloError, gql, useQuery } from \"@apollo/client\";\nimport { Collection } from \"../models/collection\";\n\nexport const CollectionSearchQuery: string = `\n    query Search($query: String!) {\n      search(pagination: {limit: 50}, query: {text: $query}, filter: {entityType: COLLECTION}) {\n        nodes {\n          collectionAddress\n          description\n          name\n        }\n      }\n    }\n`;\n\nexport function useFetchCollectionsByName(\n  query: string | null,\n  shouldPerformQuery: boolean\n): { loading: boolean; error?: ApolloError; data: Array<Collection> } {\n  const { loading, error, data } = useQuery(gql(CollectionSearchQuery), {\n    variables: {\n      query: query,\n    },\n    skip: !shouldPerformQuery,\n  });\n\n  return {\n    loading,\n    error,\n    data:\n      data == null\n        ? []\n        : data.search.nodes.map((res: any) => ({\n            collectionAddress: res.collectionAddress,\n            description: res.description,\n            name: res.name,\n          })),\n  };\n}\n","import React, { useState } from \"react\";\nimport {\n  Keyboard,\n  StyleSheet,\n  TextInput,\n  TouchableOpacity,\n  View,\n} from \"react-native\";\nimport { Feather } from \"@expo/vector-icons\";\nimport Text from \"./Text\";\n\ninterface SearchInputProps {\n  text: string | null;\n  onChangeText: (query: string | null) => void;\n  onChangeSubmittedText: (text: string | null) => void;\n  placeholderText?: string;\n}\n\nexport default function SearchInput(props: SearchInputProps): JSX.Element {\n  const [clicked, setClicked] = useState(false);\n\n  return (\n    <View style={styles.container}>\n      <View\n        style={[\n          styles.searchInputBackground,\n          { width: clicked ? \"85%\" : \"100%\" },\n        ]}\n      >\n        <View style={{ width: \"100%\", flexDirection: \"row\", flex: 1 }}>\n          <Feather\n            name=\"search\"\n            size={20}\n            color=\"black\"\n            style={{ marginLeft: 6 }}\n          />\n          <TextInput\n            style={styles.textInput}\n            autoCorrect={false}\n            autoComplete=\"off\"\n            autoCapitalize=\"none\"\n            placeholder={props.placeholderText}\n            returnKeyType=\"search\"\n            onSubmitEditing={() => props.onChangeSubmittedText(props.text)}\n            value={props.text ?? \"\"}\n            onChangeText={props.onChangeText}\n            onFocus={() => setClicked(true)}\n          />\n        </View>\n        {props.text != null && props.text.length > 0 && (\n          <TouchableOpacity\n            onPress={() => props.onChangeText(null)}\n            style={{ paddingRight: 6, paddingLeft: 6 }}\n          >\n            <Text style={{ fontSize: 18 }}>✕</Text>\n          </TouchableOpacity>\n        )}\n      </View>\n      {clicked && (\n        <TouchableOpacity\n          onPress={() => {\n            props.onChangeText(null);\n            props.onChangeSubmittedText(null);\n            setClicked(false);\n            Keyboard.dismiss();\n          }}\n          style={styles.cancelButton}\n        >\n          <Text style={{ padding: 8 }}>Cancel</Text>\n        </TouchableOpacity>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    margin: 15,\n    alignItems: \"center\",\n    flexDirection: \"row\",\n  },\n  searchInputBackground: {\n    padding: 10,\n    flexDirection: \"row\",\n    backgroundColor: \"#5c5c5c\",\n    borderRadius: 15,\n    alignItems: \"center\",\n  },\n  textInput: {\n    fontSize: 20,\n    marginLeft: 10,\n    flex: 1,\n    color: \"white\",\n  },\n  cancelButton: {\n    marginLeft: 12,\n    borderWidth: 1,\n    borderColor: \"white\",\n    borderRadius: 6,\n  },\n});\n","import { ApolloError, gql, useQuery } from \"@apollo/client\";\nimport { Collection } from \"../models/collection\";\nimport { Token } from \"../models/token\";\n\nexport const TokenFragment = gql`\n  fragment TokenFragment on Token {\n    collectionAddress\n    tokenId\n    name\n    collectionName\n    owner\n    description\n    content {\n      mediaEncoding {\n        ... on AudioEncodingTypes {\n          original\n        }\n      }\n    }\n    image {\n      mediaEncoding {\n        ... on ImageEncodingTypes {\n          thumbnail\n        }\n      }\n    }\n    metadata\n  }\n`;\n\nexport const MusicNFTSearchQuery = gql`\n  query MusicNFTs(\n    $collectionAddresses: [String!]\n    $ownerAddresses: [String!]\n    $sort: TokenSortInput\n    $limit: Int!\n  ) {\n    tokens(\n      pagination: { limit: $limit }\n      sort: $sort\n      where: {\n        collectionAddresses: $collectionAddresses\n        ownerAddresses: $ownerAddresses\n      }\n      filter: { mediaType: AUDIO }\n    ) {\n      nodes {\n        token {\n          ...TokenFragment\n        }\n      }\n    }\n  }\n  ${TokenFragment}\n`;\n\nexport function useFetchMusicNfts(\n  collection?: Collection,\n  ownerAddress?: string,\n  sort?: { [key: string]: string },\n  limit?: number\n): { loading: boolean; error?: ApolloError; data: Array<Token> } {\n  const collectionAddresses =\n    collection == null ? undefined : [collection.collectionAddress];\n  const ownerAddresses = ownerAddress == null ? undefined : [ownerAddress];\n  const { loading, error, data } = useQuery(MusicNFTSearchQuery, {\n    variables: {\n      collectionAddresses: collectionAddresses,\n      ownerAddresses: ownerAddresses,\n      limit: limit ?? 500,\n      sort: sort,\n    },\n    skip: collection == null && ownerAddress == null,\n  });\n\n  return {\n    loading,\n    error,\n    data:\n      data == null\n        ? []\n        : data.tokens.nodes.map((res: any): Token => {\n            const token = res.token;\n            return {\n              collectionAddress: token.collectionAddress,\n              tokenId: token.tokenId,\n              name: token.name,\n              collectionName: token.collectionName,\n              owner: token.owner,\n              description: token.description,\n              audioUri: token.content.mediaEncoding.original,\n              imageUri: token.image.mediaEncoding.thumbnail,\n              metadata: token.metadata,\n            };\n          }),\n  };\n}\n","import { useEffect, useState } from \"react\";\nimport { StyleSheet, TouchableOpacity } from \"react-native\";\nimport { Token } from \"../models/token\";\nimport SongListing from \"./SongListing\";\nimport Text from \"./Text\";\n\ninterface SongPaginatorProps {\n  songs: Array<Token>;\n  onChangeCurrentSong: (song: Token) => void;\n  addToUserQueue: (song: Token) => void;\n  isLoading: boolean;\n  offset: number;\n  setOffset: (setOffsetFn: (offset: number) => number) => void;\n}\n\nexport default function SongPaginator(props: SongPaginatorProps): JSX.Element {\n  const limit = 10;\n  const [currentPage, setCurrentPage] = useState<Array<Token>>([]);\n\n  useEffect(() => {\n    setCurrentPage(props.songs.slice(0, props.offset + limit));\n  }, [props.offset, props.songs]);\n\n  return (\n    <SongListing\n      {...props}\n      loadMoreButton={\n        <TouchableOpacity\n          style={styles.loadMoreButton}\n          onPress={() => props.setOffset((curOffset) => curOffset + limit)}\n        >\n          <Text style={styles.loadMoreText}>load more</Text>\n        </TouchableOpacity>\n      }\n      hasNextPage={props.songs.length > currentPage.length}\n      songs={currentPage}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  loadMoreButton: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: 20,\n  },\n  loadMoreText: {\n    fontSize: 16,\n    padding: 8,\n    borderWidth: 1,\n    borderColor: \"white\",\n    borderRadius: 6,\n  },\n});\n","import { SafeAreaView, View } from \"react-native\";\nimport { useFetchMusicNfts } from \"../hooks/useFetchMusicNfts\";\nimport { Collection } from \"../models/collection\";\nimport { Token } from \"../models/token\";\nimport SongPaginator from \"./SongPaginator\";\nimport Text from \"./Text\";\n\ninterface SongFetcherProps {\n  onChangeSelectedSong: (song: Token | null) => Promise<boolean>;\n  addToUserQueue: (song: Token) => void;\n  handleChangeGlobalQueue: (songs: Array<Token>) => void;\n  isLoading: boolean;\n  offset: number;\n  setOffset: (setOffsetFn: (offset: number) => number) => void;\n  collection?: Collection;\n  ownerAddress?: string;\n}\n\nconst GLOBAL_QUEUE_SIZE = 25;\n\nexport default function SongFetcher(props: SongFetcherProps): JSX.Element {\n  const {\n    loading,\n    error,\n    data: musicNfts,\n  } = useFetchMusicNfts(props.collection, props.ownerAddress);\n\n  const handleChangeCurrentSong = async (song: Token) => {\n    const didSetSong = await props.onChangeSelectedSong(song);\n    if (didSetSong && musicNfts.length > 0) {\n      const startIdx = musicNfts.indexOf(song) + 1;\n      const nextSongs = musicNfts.slice(startIdx, startIdx + GLOBAL_QUEUE_SIZE);\n      let prevSongs = [];\n      const endIdx = Math.min(\n        GLOBAL_QUEUE_SIZE - nextSongs.length,\n        startIdx - 1\n      );\n      if (GLOBAL_QUEUE_SIZE > nextSongs.length) {\n        for (let i = 0; i < endIdx; i++) {\n          const song = musicNfts[i];\n          if (!nextSongs.includes(song)) {\n            prevSongs.push(song);\n          }\n        }\n      }\n      props.handleChangeGlobalQueue([...nextSongs, ...prevSongs]);\n    }\n  };\n\n  return (\n    <SafeAreaView\n      style={{\n        flex: 1,\n        width: \"100%\",\n      }}\n    >\n      {loading ? (\n        <View style={{ width: \"100%\", alignItems: \"center\" }}>\n          <Text style={{ fontSize: 16, marginTop: 20 }}>\n            ❀ ❀ ❀ searching music ❀ ❀ ❀\n          </Text>\n        </View>\n      ) : error ? (\n        <View style={{ width: \"100%\", alignItems: \"center\" }}>\n          <Text style={{ fontSize: 16, marginTop: 20 }}>\n            we encountered an error :{\"(\"}\n          </Text>\n        </View>\n      ) : musicNfts.length > 0 ? (\n        <SongPaginator\n          songs={musicNfts}\n          onChangeCurrentSong={handleChangeCurrentSong}\n          addToUserQueue={props.addToUserQueue}\n          isLoading={props.isLoading}\n          offset={props.offset}\n          setOffset={props.setOffset}\n        />\n      ) : (\n        <View style={{ width: \"100%\", alignItems: \"center\" }}>\n          <Text style={{ fontSize: 16, marginTop: 20 }}>\n            no music found :{\"(\"}\n          </Text>\n        </View>\n      )}\n    </SafeAreaView>\n  );\n}\n","import { SafeAreaView, StyleSheet, View } from \"react-native\";\nimport { useFetchMusicNfts } from \"../hooks/useFetchMusicNfts\";\nimport { Token } from \"../models/token\";\nimport SongListing from \"./SongListing\";\nimport Text from \"./Text\";\n\nexport default function WelcomeMessage(props: {\n  addToUserQueue: (song: Token) => void;\n  onChangeCurrentSong: (song: Token | null) => void;\n  isLoading: boolean;\n}): JSX.Element {\n  const {\n    loading,\n    error,\n    data: musicNfts,\n  } = useFetchMusicNfts(\n    { collectionAddress: \"0xabEFBc9fD2F806065b4f3C237d4b59D9A97Bcac7\" },\n    undefined,\n    { sortKey: \"MINTED\", sortDirection: \"DESC\" },\n    10\n  );\n  return (\n    <View style={{ width: \"100%\", flex: 1 }}>\n      <View style={{ width: \"100%\", alignItems: \"center\" }}>\n        <View style={{ width: \"80%\", alignItems: \"center\", marginTop: 18 }}>\n          <Text style={{ fontSize: 24, marginBottom: 18 }}>\n            welcome to onchain.fm\n          </Text>\n          <View style={{ alignItems: \"flex-start\" }}>\n            <Text style={{ fontSize: 16, marginBottom: 12 }}>\n              ❀ search for a collection by name or address\n            </Text>\n            <Text style={{ fontSize: 16 }}>\n              ❀ search for an owner by ens or address\n            </Text>\n          </View>\n        </View>\n      </View>\n      <SafeAreaView style={styles.safeAreaView}>\n        <View style={{ width: \"100%\", alignItems: \"center\" }}>\n          <Text style={{ fontSize: 18, padding: 8 }}>\n            recently minted on zora\n          </Text>\n        </View>\n        <SongListing\n          songs={loading || error ? [] : musicNfts}\n          onChangeCurrentSong={props.onChangeCurrentSong}\n          addToUserQueue={props.addToUserQueue}\n          isLoading={props.isLoading}\n        />\n      </SafeAreaView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  safeAreaView: {\n    flex: 1,\n    marginTop: 32,\n    width: \"100%\",\n  },\n});\n","import { StyleSheet, View } from \"react-native\";\nimport CollectionFetcher from \"../components/CollectionFetcher\";\nimport SearchInput from \"../components/SearchInput\";\nimport SongFetcher from \"../components/SongFetcher\";\nimport WelcomeMessage from \"../components/WelcomeMessage\";\nimport { QueueState } from \"../hooks/useQueue\";\nimport { SearchState } from \"../hooks/useSearch\";\nimport { Collection } from \"../models/collection\";\nimport { isAddressLike, isEnsLike } from \"../utils\";\n\nconst shouldQueryByOwner = (\n  query: string | null,\n  selectedCollection: Collection | null\n): boolean => {\n  if (query == null || query.length === 0) {\n    return false;\n  }\n  if (selectedCollection != null) {\n    return false;\n  }\n  return isEnsLike(query) || isAddressLike(query);\n};\n\ninterface SearchViewProps {\n  searchState: SearchState;\n  queueState: QueueState;\n}\n\nexport default function SearchView(props: SearchViewProps): JSX.Element {\n  const {\n    query,\n    onChangeQuery,\n    submitted,\n    onChangeSubmitted,\n    selectedCollection,\n    setSelectedCollection,\n    offset,\n    setOffset,\n  } = props.searchState;\n\n  const owner = shouldQueryByOwner(submitted, selectedCollection)\n    ? submitted\n    : undefined;\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.searchInputContainer}>\n        <View style={{ width: \"100%\" }}>\n          <SearchInput\n            text={query}\n            onChangeText={onChangeQuery}\n            onChangeSubmittedText={onChangeSubmitted}\n          />\n        </View>\n      </View>\n      <View style={styles.fetcherContainer}>\n        {submitted == null && (\n          <WelcomeMessage\n            onChangeCurrentSong={props.queueState.handleSetCurrentSong}\n            addToUserQueue={props.queueState.addToUserQueue}\n            isLoading={props.queueState.isLoading}\n          />\n        )}\n        {selectedCollection == null && submitted != null && (\n          <CollectionFetcher\n            submitted={submitted}\n            onChangeSelectedCollection={setSelectedCollection}\n          />\n        )}\n        {(selectedCollection != null || owner != null) && submitted != null && (\n          <SongFetcher\n            collection={selectedCollection ?? undefined}\n            ownerAddress={owner ?? undefined}\n            onChangeSelectedSong={props.queueState.handleSetCurrentSong}\n            addToUserQueue={props.queueState.addToUserQueue}\n            handleChangeGlobalQueue={props.queueState.setGlobalQueue}\n            isLoading={props.queueState.isLoading}\n            offset={offset}\n            setOffset={setOffset}\n          />\n        )}\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: \"100%\",\n    alignItems: \"center\",\n    flex: 1,\n    height: \"100%\",\n    marginTop: 20,\n  },\n  searchInputContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: \"80%\",\n  },\n  fetcherContainer: {\n    flex: 1,\n    width: \"100%\",\n    alignItems: \"center\",\n  },\n});\n","import imageLoading from \"../assets/image-loading.png\";\nimport { Token } from \"../models/token\";\nimport {\n  Image,\n  SafeAreaView,\n  ScrollView,\n  StyleSheet,\n  TouchableOpacity,\n  View,\n} from \"react-native\";\nimport Text from \"../components/Text\";\nimport { useState } from \"react\";\n\ninterface SongInfoViewProps {\n  song: Token;\n}\nexport default function SongInfoView(props: SongInfoViewProps): JSX.Element {\n  const song = props.song;\n  const [showMetadata, setShowMetadata] = useState(false);\n  return (\n    <View style={styles.container}>\n      <SafeAreaView style={styles.safeAreaView}>\n        <ScrollView style={{ paddingLeft: 16, paddingRight: 16 }}>\n          <View style={styles.header}>\n            <Text style={{ fontSize: 24, marginBottom: 24 }}>{song.name}</Text>\n            <Image\n              defaultSource={imageLoading}\n              source={{ uri: song?.imageUri }}\n              style={{ width: 256, height: 256 }}\n            />\n          </View>\n          <Text style={{ fontSize: 18 }}>\n            {song.collectionName} #{song.tokenId}\n          </Text>\n          <Text style={{ marginBottom: 12 }}>{song.collectionAddress}</Text>\n          <Text style={{ marginBottom: 12 }}>Owner: {song.owner}</Text>\n          <Text style={{ marginBottom: 20 }}>{song.description}</Text>\n          <View\n            style={{\n              width: \"100%\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <TouchableOpacity\n              style={styles.showMetadataButton}\n              onPress={() => setShowMetadata(!showMetadata)}\n            >\n              <Text style={styles.showMetadataText}>\n                {showMetadata ? \"hide raw metadata\" : \"show raw metadata\"}\n              </Text>\n            </TouchableOpacity>\n            {showMetadata && (\n              <Text style={{ marginBottom: 24 }}>\n                {JSON.stringify(song.metadata, null, 2)}\n              </Text>\n            )}\n          </View>\n        </ScrollView>\n      </SafeAreaView>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: \"100%\",\n    alignItems: \"center\",\n    flex: 1,\n    height: \"100%\",\n  },\n  safeAreaView: {\n    flex: 1,\n    width: \"100%\",\n  },\n  header: {\n    width: \"100%\",\n    alignItems: \"center\",\n    marginTop: 20,\n    marginBottom: 20,\n  },\n  showMetadataButton: {\n    width: \"80%\",\n    maxWidth: 256,\n    alignItems: \"center\",\n    marginBottom: 36,\n    borderWidth: 1,\n    borderRadius: 10,\n    borderColor: \"white\",\n  },\n  showMetadataText: {\n    fontSize: 18,\n    lineHeight: 18,\n    paddingTop: 16,\n    paddingBottom: 16,\n  },\n});\n","import { ApolloClient, ApolloProvider, InMemoryCache } from \"@apollo/client\";\nimport { Audio, InterruptionModeIOS } from \"expo-av\";\nimport { useEffect, useState } from \"react\";\nimport { StatusBar, StyleSheet, View } from \"react-native\";\nimport { RootSiblingParent } from \"react-native-root-siblings\";\nimport Player from \"./components/Player\";\nimport { QueueState, useQueue } from \"./hooks/useQueue\";\nimport { useSearch } from \"./hooks/useSearch\";\nimport QueueView from \"./views/QueueView\";\nimport SearchView from \"./views/SearchView\";\nimport SongInfoView from \"./views/SongInfoView\";\n\nconst client = new ApolloClient({\n  uri: \"https://api.zora.co/graphql\",\n  cache: new InMemoryCache(),\n});\n\nexport default function App() {\n  const queueState: QueueState = useQueue();\n  const [isQueueViewOpen, setIsQueueViewOpen] = useState(false);\n  const [isSongInfoViewOpen, setIsSongInfoViewOpen] = useState(false);\n  const [hasSetAudioMode, setHasSetAudioMode] = useState(false);\n  const searchState = useSearch();\n  useEffect(() => {\n    const setUpSound = async () => {\n      await Audio.setAudioModeAsync({\n        staysActiveInBackground: true,\n        interruptionModeIOS: InterruptionModeIOS.DoNotMix,\n        allowsRecordingIOS: false,\n        playsInSilentModeIOS: true,\n      });\n    };\n    if (!hasSetAudioMode) {\n      setUpSound();\n      setHasSetAudioMode(true);\n    }\n  });\n  return (\n    <RootSiblingParent>\n      <ApolloProvider client={client}>\n        <View style={styles.container}>\n          <StatusBar />\n          <View style={styles.screen}>\n            <View\n              style={{\n                width: \"100%\",\n                alignItems: \"center\",\n                flex: 1,\n              }}\n            >\n              {isSongInfoViewOpen && queueState.currentLoadedSong != null && (\n                <SongInfoView song={queueState.currentLoadedSong.song} />\n              )}\n              {isQueueViewOpen && (\n                <QueueView\n                  queueState={queueState}\n                  handleCloseQueueView={() => setIsQueueViewOpen(false)}\n                />\n              )}\n              {!isSongInfoViewOpen && !isQueueViewOpen && (\n                <SearchView searchState={searchState} queueState={queueState} />\n              )}\n            </View>\n            <View style={styles.player}>\n              <Player\n                queueState={queueState}\n                onChangeIsSongInfoViewOpen={() => {\n                  setIsSongInfoViewOpen(!isSongInfoViewOpen);\n                  setIsQueueViewOpen(false);\n                }}\n                handleToggleQueueView={() => {\n                  if (!isQueueViewOpen) {\n                    setIsQueueViewOpen(true);\n                    setIsSongInfoViewOpen(false);\n                  } else {\n                    setIsQueueViewOpen(false);\n                  }\n                }}\n              />\n            </View>\n          </View>\n        </View>\n      </ApolloProvider>\n    </RootSiblingParent>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"#2d2d2d\",\n    alignItems: \"center\",\n    flex: 1,\n  },\n  screen: {\n    width: \"100%\",\n    alignItems: \"center\",\n    flex: 1,\n    marginTop: 20,\n  },\n  player: {\n    width: \"100%\",\n    alignItems: \"center\",\n    height: 200,\n    shadowColor: \"#171717\",\n    shadowOffset: { width: 0, height: -2 },\n    borderTopWidth: 0.5,\n    borderLeftWidth: 0.5,\n    borderRightWidth: 0.5,\n    borderTopLeftRadius: 10,\n    borderTopRightRadius: 10,\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    backgroundColor: \"black\",\n  },\n});\n","import { useState } from \"react\";\nimport { Collection } from \"../models/collection\";\nimport { normalizeText } from \"../utils\";\n\nexport interface SearchState {\n  query: string | null;\n  onChangeQuery: (query: string | null) => void;\n  submitted: string | null;\n  onChangeSubmitted: (result: string | null) => void;\n  selectedCollection: Collection | null;\n  setSelectedCollection: (collection: Collection | null) => void;\n  offset: number;\n  setOffset: (setOffsetFn: (offset: number) => number) => void;\n}\n\nexport function useSearch(): SearchState {\n  const [query, setQuery] = useState<string | null>(null);\n  const [submitted, setSubmitted] = useState<string | null>(null);\n  const [offset, setOffset] = useState(0);\n  const [selectedCollection, setSelectedCollection] =\n    useState<Collection | null>(null);\n\n  return {\n    query: query,\n    onChangeQuery: (query: string | null) => setQuery(query),\n    submitted: submitted,\n    onChangeSubmitted: (submitted: string | null) => {\n      setSelectedCollection(null);\n      setOffset(0);\n      if (submitted != null) {\n        setSubmitted(normalizeText(submitted));\n      } else {\n        setSubmitted(null);\n      }\n    },\n    selectedCollection,\n    setSelectedCollection,\n    offset,\n    setOffset,\n  };\n}\n"],"sourceRoot":""}